(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{EcEN:function(e,a,i){var t=i("xDdU"),o=i("xk4V"),n=o;n.v1=t,n.v4=o,e.exports=n},TkPj:function(e,a,i){"use strict";i.r(a),i.d(a,"StorageModule",function(){return Oa});var t=i("SVse"),o=i("s7LF"),n=i("lJxs"),s=i("vkgz"),r=i("N/25"),c=i("eIep"),d=function(){return function(){}}(),l=function(){return function(){}}(),b=function(){return function(){}}(),u=function(){function e(){this.domain="",this.userName="",this.Process="",this.CodFrecuencia="",this.DeclaraquenocontieneM="",this.Cliente="",this.NumerodeTramosaSolicit="",this.NumerodeCaso="",this.FechaHoraCorte="",this.OrdendeRetiro="",this.FechaHoraRetiro="",this.OrdendeIngreso="",this.FechaHoraIngreso="",this.CodigoQR="",this.ReservadePosiciones=[],this.ListadodeHorasDisponibl=[],this.ListadodeHorasParaRetiroClass=[],this.DetalledeUbicacionesDis=[],this.banco="",this.tipoPago="",this.tipoCuenta="",this.numCuenta=""}return e.prototype.toXMLCreateInitialCase=function(){return"<BizAgiWSParam>\n        <domain>"+this.domain+"</domain>\n        <userName>"+this.userName+"</userName>\n         <Cases>\n          <Case>\n        <Process>"+this.Process+'</Process>\n        <Entities>\n        <ControlDeAlmacenaje>\n        <Cliente entityName="Cliente" key=\''+this.Cliente+"'> \n         </Cliente>\n        </ControlDeAlmacenaje>\n        </Entities>\n        </Case>\n      </Cases>\n     </BizAgiWSParam>"},e.prototype.toXmlFullCase=function(){return"<ControlDeAlmacenaje>\n       \n        <DeclaraquenocontieneM>"+this.DeclaraquenocontieneM+"</DeclaraquenocontieneM>\n        </ControlDeAlmacenaje>"},e.prototype.ListadoHorasReservadaXML=function(){var e="";return this.ListadodeHorasDisponibl.forEach(function(a){e=null!=a.key&&null!=a.key?e+'\n                <ListadodeHorasDisponibles key="'+a.key+'">\n                <CantidadReservada>'+a.CantidadReservada+"</CantidadReservada>\n\t\t\t\t\t<FechadeIngreso>"+a.FechadeIngreso+"</FechadeIngreso>\n\t\t\t\t\t<Seleccionado>"+a.Seleccionado+"</Seleccionado>\n\t\t\t\t\t<Tramosdisponibles>"+a.Tramosdisponibles+"</Tramosdisponibles>\n                </ListadodeHorasDisponibles>\n                ":e+"\n                <ListadodeHorasDisponibles>\n                <CantidadReservada>"+a.CantidadReservada+"</CantidadReservada>\n\t\t\t\t\t<FechadeIngreso>"+a.FechadeIngreso+"</FechadeIngreso>\n\t\t\t\t\t<Seleccionado>"+a.Seleccionado+"</Seleccionado>\n\t\t\t\t\t<Tramosdisponibles>"+a.Tramosdisponibles+"</Tramosdisponibles>\n                </ListadodeHorasDisponibles>\n                "}),e},e.prototype.ListadoHorasParaRetiroXML=function(){var e=this,a="";return this.ListadodeHorasParaRetiroClass.forEach(function(i){a=a+"\n                <ListadodeHorasparaRetiro>\n                    <Seleccionar>"+i.Seleccionado+"</Seleccionar>\n\t\t\t\t    <TramosdeRetiro>"+i.Tramosdisponibles+"</TramosdeRetiro>\n\t\t\t\t    <FechadeRetiro>"+e.FechaHoraRetiro+"</FechadeRetiro>\n\t\t\t\t</ListadodeHorasparaRetiro>\n                "}),a},e.prototype.ListadoUbicDisponibleParaRetiroXML=function(){var e="";return this.DetalledeUbicacionesDis.forEach(function(a){e=e+"\n                <DetalledeUbicacionesDisp key='"+a.key+"'>\n                    <SeleccionarRetiro>"+a.SeleccionarRetiro+"</SeleccionarRetiro>\n\t\t\t\t</DetalledeUbicacionesDisp>\n                "}),e},e.prototype.ReservaPosicionXML=function(){var e="";return this.ReservadePosiciones.forEach(function(a){e=null!=a.key&&""!=a.key?e+" <ReservadePosiciones entityName='ReservadePosiciones' key='"+a.key+"'>  \n             \n                <CantidadRequerida>"+a.CantidadRequerida+"</CantidadRequerida> \n                <CodigodeEstandar>"+a.CodigodeEstandar+"</CodigodeEstandar>   \n                <TipodeTarifa>"+a.TipodeTarifa+"</TipodeTarifa>   \n                <ObservacionesAdicionales>"+a.ObservacionesAdicionales+"</ObservacionesAdicionales>   \n                </ReservadePosiciones> ":e+" <ReservadePosiciones>  \n                 \n                <CantidadRequerida>"+a.CantidadRequerida+"</CantidadRequerida> \n                <CodigodeEstandar>"+a.CodigodeEstandar+"</CodigodeEstandar>   \n                <TipodeTarifa>"+a.TipodeTarifa+"</TipodeTarifa>   \n                <ObservacionesAdicionales>"+a.ObservacionesAdicionales+"</ObservacionesAdicionales>   \n                </ReservadePosiciones> "}),e},e.prototype.toXMLUpdateCase=function(){return"<BizAgiWSParam>\n        <Entities>\n        <ControlDeAlmacenaje entityName='ControlDeAlmacenaje' key='"+this.idCase+"'>\n\n   <DeclaraquenocontieneM>"+this.DeclaraquenocontieneM+"</DeclaraquenocontieneM>\n            <FechaHoraIngreso>"+this.FechaHoraIngreso+"</FechaHoraIngreso>\n            <NumerodeCuenta>"+this.numCuenta+"</NumerodeCuenta>\n            <ReservadePosiciones>\n                "+this.ReservaPosicionXML()+'\n            </ReservadePosiciones>\n\n            <TipodeCuenta entityName="TipodeCuenta">\n                <CodTipodeCuenta>'+(this.tipoCuenta||"")+'</CodTipodeCuenta>\n            </TipodeCuenta>\n\n            <Banco entityName="Banco">\n              <CodBanco>'+(this.banco||"")+'</CodBanco>\n            </Banco>\n\n            <TipodePago entityName="TipodePago">\n                <Cod>'+this.tipoPago+"</Cod>\n            </TipodePago>\n\n            <ListadodeHorasDisponibl>\n                "+this.ListadoHorasReservadaXML()+"\n            </ListadodeHorasDisponibl>\n        </ControlDeAlmacenaje>\n        </Entities>\n     </BizAgiWSParam>"},e.prototype.toXMLUpdateRetiroCase=function(){return"<BizAgiWSParam>\n        <Entities>\n        <ControlDeAlmacenaje entityName='ControlDeAlmacenaje' key='"+this.idCase+"'>\n        <FechaHoraRetiro>"+this.FechaHoraRetiro+"</FechaHoraRetiro>\n\n        <ListadodeHorasparaReti>\n            "+this.ListadoHorasParaRetiroXML()+"\n        </ListadodeHorasparaReti>\n\n        <DetalledeUbicacionesDis>\n        "+this.ListadoUbicDisponibleParaRetiroXML()+"\n    </DetalledeUbicacionesDis>\n\n        \n        </ControlDeAlmacenaje>\n        </Entities>\n     </BizAgiWSParam>"},e}(),p=i("RYjw"),m=i("AytR"),h=i("5kvo"),f=i("ZhCz"),v=i("8Y7J"),T=i("tqRt"),C=function(){function e(e,a){this.bizagiService=e,this.store=a,this.subs=new f.a}return e.prototype.ObtenerUbicacionXDia=function(e,a,i){var t="EstadodelaUbicacion="+e+" and EstandardelaUbicacion="+a+" and FechadeIngreso='"+i+"'";this.store.dispatch(Object(h.F)({filtro:t}))},e.prototype.prepararCreacionSolicitud=function(e){console.log("Se creara registro solicitud para usuario, idEmpresa: ",e);var a=new u;a.userName=m.a.usuario_creador_caso,a.domain=m.a.domain,a.Process="ControlDeAlmacenaje",a.Cliente=e,this.store.dispatch(Object(h.y)({xml:a.toXMLCreateInitialCase()}))},e.prototype.procesarRetiro=function(e,a,i,t){var o=this,n=new u;n.userName=m.a.usuario_creador_caso,n.domain=m.a.domain,n.Process=m.a.proceso,n.FechaHoraRetiro=a;var s,r="";return e.forEach(function(e,a){s=e.ControlDeAlmacenaje,r+='<NewUbicaciones key="'+e.CodUbicacionNew+'">\n        <EstadodelaUbicacion entityName="EstadodelaUbicacion"> <CodEstado>003</CodEstado></EstadodelaUbicacion>\n        </NewUbicaciones>';var i=new b;i.Seleccionado=!0,i.Tramosdisponibles=t[a].id,n.ListadodeHorasParaRetiroClass.push(i),n.DetalledeUbicacionesDis.push({SeleccionarRetiro:!0,key:e._attributes.key})}),n.idCase=s.toString(),this.bizagiService.initServices$.pipe(Object(c.a)(function(e){if(e)return o.bizagiService.saveEntityCase(n.toXMLUpdateRetiroCase()).pipe(Object(c.a)(function(e){if(console.log("saveEntityCase",e),null!=e.Entities.ControlDeAlmacenaje&&""!=e.Entities.ControlDeAlmacenaje)return o.bizagiService.saveEntity(r).pipe(Object(c.a)(function(e){if(console.log("saveEntity",e),null!=e.Entities.NewUbicaciones&&""!=e.Entities.NewUbicaciones)return console.log("performActivity",n.idCase,m.a.taskIdSolicitarRetiro),o.bizagiService.performActivity(i,m.a.taskIdSolicitarRetiro)}))}))}))},e.prototype.actualizarCasoRecepcion=function(e,a,i,t,o,n,s,r,c){var b=new u;b.userName=m.a.usuario_creador_caso,b.domain=m.a.domain,b.Process=m.a.proceso,b.DeclaraquenocontieneM=i,b.idCase=t,b.FechaHoraIngreso=o,b.banco=n,b.tipoPago=s,b.tipoCuenta=r,b.numCuenta=c;var p=0;e.forEach(function(e){var a=new d;a.CantidadRequerida=e.CantidadRequerida,a.CodigodeEstandar=e.CodigodeEstandar,a.ObservacionesAdicionales=e.ObservacionesAdicionales,a.TipodeTarifa=e.TipodeTarifa,null!=e._attributes&&null!=e._attributes.key&&(a.key=e._attributes.key),p+=e.CantidadRequerida,b.ReservadePosiciones.push(a)}),a.forEach(function(e){var a=new l;e.seleccionado?p>10?(a.CantidadReservada=10,p-=10):a.CantidadReservada=p:a.CantidadReservada=0,a.FechadeIngreso=o,a.Seleccionado=e.seleccionado,a.Tramosdisponibles=e.id,null!=e._attributes&&null!=e._attributes.key&&(a.key=e._attributes.key),b.ListadodeHorasDisponibl.push(a)}),this.store.dispatch(Object(h.d)({xml:b.toXMLUpdateCase()}))},e.prototype.getCasosPendientes=function(e,a){this.store.dispatch(Object(h.B)({idCliente:"Cliente="+e+" And EnCompletarRegistro="+a}))},e.prototype.getCasosDisponibleParaRetiro=function(e,a){this.store.dispatch(Object(h.B)({idCliente:"Cliente="+e+" And DisponibleparaRetiro="+a}))},e.prototype.getFrecuenciaCobro=function(){return this.bizagiService.getEntities("FrecuenciadeCobro").pipe(Object(n.a)(function(e){if(e.Entities)return e.Entities.FrecuenciadeCobro}))},e.prototype.ngOnDestroy=function(){},e.\u0275fac=function(a){return new(a||e)(v.Yb(p.a),v.Yb(T.h))},e.\u0275prov=v.Kb({token:e,factory:e.\u0275fac}),e}(),g=i("iELJ"),D=i("EcEN"),U=i("Q2Ze"),y=i("ZTz/"),R=i("UhP/"),P=i("e6WT"),E=i("Dxy4");function A(e,a){if(1&e&&(v.Ub(0,"mat-option",19),v.Bc(1),v.Tb()),2&e){var i=a.$implicit;v.lc("value",i.CodEstandar),v.Db(1),v.Dc(" ",i.DescEstandar," ")}}function B(e,a){if(1&e&&(v.Ub(0,"mat-option",19),v.Bc(1),v.Tb()),2&e){var i=a.$implicit;v.lc("value",i.CodTipodeTarifa),v.Db(1),v.Dc(" ",i.DescTipodeTarifa," ")}}var S=function(){return function(){this.cantidadRequerida=0,this.id=D.v4()}}(),k=function(){function e(e,a,i,t,o){this.dialogRef=e,this.fb=a,this.storageService=i,this.store=t,this.data=o,this.reservaPosicion=new S,this.cantidadDisponible=0,this.currentTotalUbicaciones=0,this.subs=new f.a,this.dialogRef.disableClose=!0}return e.prototype.ngOnInit=function(){this.ReservaPosicionesForm=this.fb.group({estandar:["",[o.u.required]],tipoTarifa:["",[o.u.required]],Cantidad:["",[o.u.required,o.u.min(1)]],Observaciones:[""]}),this.loadData(),this.addListener(),null!=this.data.reserva&&this.poblarDatosReserva(this.data.reserva)},e.prototype.poblarDatosReserva=function(e){var a=this;console.log("poblar reserva"),this.reservaPosicion.id=e.id,this.subs.sink=this.listadoEstandar$.subscribe(function(i){a.currentEstandar=i.filter(function(a){return a._attributes.key==e.CodigodeEstandar})[0],a.ReservaPosicionesForm.get("estandar").setValue(a.currentEstandar.CodEstandar),a.listadoTarifa$=a.store.select("tarifa").pipe(Object(n.a)(function(e){if(e.loaded)return e.bizagiResponse.Entities.TipodeTarifa.filter(function(e){return e.Estandar.CodEstandar==a.currentEstandar.CodEstandar})})),a.subs.sink=a.listadoTarifa$.subscribe(function(i){a.ReservaPosicionesForm.get("tipoTarifa").setValue(i.find(function(a){return a._attributes.key==e.TipodeTarifa}).CodTipodeTarifa)})}),this.ReservaPosicionesForm.get("Observaciones").setValue(e.ObservacionesAdicionales),this.ReservaPosicionesForm.get("Cantidad").setValue(e.CantidadRequerida),this.subs.sink=this.listadoTarifa$.subscribe(function(i){a.currentTarifa=i.filter(function(a){return a.CodTipodeTarifa==e.TipodeTarifa})[0],a.getDisponibilidadUbicaciones()})},e.prototype.addListener=function(){this.listadoEstandar$=this.store.select("estandar").pipe(Object(n.a)(function(e){if(e.loaded)return e.bizagiResponse.Entities.EstandardelaUbicacion}))},e.prototype.getDisponibilidadUbicaciones=function(){var e;switch(null===(e=this.currentEstandar)||void 0===e?void 0:e.CodEstandar){case"E1":this.cantidadDisponible=this.data.disponibleBase;break;case"E2":this.cantidadDisponible=this.data.disponibleMedia;break;case"E3":this.cantidadDisponible=this.data.disponibleMaxima}return this.ReservaPosicionesForm.get("Cantidad").setValidators(o.u.max(this.cantidadDisponible)),this.ReservaPosicionesForm.get("Cantidad").updateValueAndValidity(),this.cantidadDisponible},e.prototype.seleccionEstandar=function(e){var a=this;this.subs.sink=this.listadoEstandar$.subscribe(function(i){a.currentEstandar=i.filter(function(a){return a.CodEstandar==e})[0],a.listadoTarifa$=a.store.select("tarifa").pipe(Object(n.a)(function(a){if(a.loaded){var i=a.bizagiResponse.Entities.TipodeTarifa;if(null!=i&&i.length>0)return i.filter(function(a){var i;return(null===(i=a.Estandar)||void 0===i?void 0:i.CodEstandar)==e})}}))}),this.getDisponibilidadUbicaciones()},e.prototype.seleccionTarifa=function(e){var a=this;console.log("valor tarifa:",e),this.subs.sink=this.listadoTarifa$.subscribe(function(i){a.currentTarifa=i.filter(function(a){return a.CodTipodeTarifa==e})[0]})},e.prototype.ngOnDestroy=function(){this.subs&&this.subs.unsubscribe()},e.prototype.loadData=function(){},e.prototype.onNoClick=function(){this.dialogRef.close()},e.prototype.onClick=function(){if(console.log("cerrando dialogo reserva posiciones"),!this.ReservaPosicionesForm.invalid){var e=this.ReservaPosicionesForm.value,a=e.Observaciones;this.reservaPosicion.cantidadRequerida=e.Cantidad,this.reservaPosicion.estandar=this.currentEstandar,this.reservaPosicion.tarifa=this.currentTarifa,this.reservaPosicion.observaciones=a,this.dialogRef.close()}},e.\u0275fac=function(a){return new(a||e)(v.Ob(g.g),v.Ob(o.d),v.Ob(C),v.Ob(T.h),v.Ob(g.a))},e.\u0275cmp=v.Ib({type:e,selectors:[["app-reserva-posiciones"]],decls:57,vars:15,consts:[["mat-dialog-title",""],[1,"portal-form",3,"formGroup"],[1,"mat-typography"],[1,"row"],[1,"col-sm-12"],["cdkInitialFocus","",1,"portal-full-width"],["formControlName","estandar","required","",3,"selectionChange"],["value","0"],[3,"value",4,"ngFor","ngForOf"],[1,"col-sm-6","col-md-6","col-lg-6"],[1,"portal-full-width"],["formControlName","tipoTarifa","required","",3,"selectionChange"],["matInput","","type","text","readonly","",3,"value"],["matInput","","type","number","formControlName","Cantidad","required","","min","1","required","",3,"max"],["matInput","","type","number","readonly","",3,"value"],["matInput","","placeholder","...","formControlName","Observaciones"],["align","end"],["mat-button","",3,"click"],["mat-button","","color","primary","type","button",3,"mat-dialog-close","disabled","click"],[3,"value"]],template:function(e,a){1&e&&(v.Ub(0,"h1",0),v.Bc(1,"Adicionar reserva de posiciones"),v.Tb(),v.Ub(2,"form",1),v.Ub(3,"mat-dialog-content",2),v.Ub(4,"div",3),v.Ub(5,"div",4),v.Bc(6," Adicionar registro "),v.Tb(),v.Tb(),v.Pb(7,"br"),v.Ub(8,"div",3),v.Ub(9,"div",4),v.Ub(10,"mat-form-field",5),v.Ub(11,"mat-label"),v.Bc(12,"Estandar"),v.Tb(),v.Ub(13,"mat-select",6),v.bc("selectionChange",function(e){return a.seleccionEstandar(e.value)}),v.Ub(14,"mat-option",7),v.Bc(15,"--"),v.Tb(),v.Ac(16,A,2,2,"mat-option",8),v.gc(17,"async"),v.Tb(),v.Tb(),v.Tb(),v.Tb(),v.Ub(18,"div",3),v.Ub(19,"div",9),v.Ub(20,"mat-form-field",10),v.Ub(21,"mat-label"),v.Bc(22,"Tipo de tarifa"),v.Tb(),v.Ub(23,"mat-select",11),v.bc("selectionChange",function(e){return a.seleccionTarifa(e.value)}),v.Ub(24,"mat-option"),v.Bc(25,"--"),v.Tb(),v.Ac(26,B,2,2,"mat-option",8),v.gc(27,"async"),v.Tb(),v.Tb(),v.Tb(),v.Ub(28,"div",9),v.Ub(29,"mat-form-field",10),v.Ub(30,"mat-label"),v.Bc(31,"Valor Tarifa:"),v.Tb(),v.Pb(32,"input",12),v.gc(33,"currency"),v.Tb(),v.Tb(),v.Tb(),v.Ub(34,"div",3),v.Ub(35,"div",9),v.Ub(36,"mat-form-field",10),v.Ub(37,"mat-label"),v.Bc(38,"Cantidad requerida"),v.Tb(),v.Pb(39,"input",13),v.Tb(),v.Tb(),v.Ub(40,"div",9),v.Ub(41,"mat-form-field",10),v.Ub(42,"mat-label"),v.Bc(43,"Ubicaciones disponibles"),v.Tb(),v.Pb(44,"input",14),v.Tb(),v.Tb(),v.Tb(),v.Ub(45,"div",3),v.Ub(46,"div",4),v.Ub(47,"mat-form-field",10),v.Ub(48,"mat-label"),v.Bc(49,"Observaciones adicionales"),v.Tb(),v.Pb(50,"textarea",15),v.Tb(),v.Tb(),v.Tb(),v.Tb(),v.Pb(51,"br"),v.Ub(52,"mat-dialog-actions",16),v.Ub(53,"button",17),v.bc("click",function(){return a.onNoClick()}),v.Bc(54,"Cancelar"),v.Tb(),v.Ub(55,"button",18),v.bc("click",function(){return a.onClick()}),v.Bc(56,"Aceptar"),v.Tb(),v.Tb(),v.Tb()),2&e&&(v.Db(2),v.lc("formGroup",a.ReservaPosicionesForm),v.Db(14),v.lc("ngForOf",v.hc(17,8,a.listadoEstandar$)),v.Db(10),v.lc("ngForOf",v.hc(27,10,a.listadoTarifa$)),v.Db(6),v.lc("value",v.ic(33,12,null==a.currentTarifa?null:a.currentTarifa.Valor,"CLP")),v.Db(7),v.lc("max",a.cantidadDisponible),v.Db(5),v.lc("value",a.cantidadDisponible),v.Db(11),v.lc("mat-dialog-close",a.reservaPosicion)("disabled",a.ReservaPosicionesForm.invalid))},directives:[g.h,o.v,o.p,o.h,g.e,U.c,U.f,y.a,o.o,o.g,o.t,R.m,t.l,P.b,o.r,o.c,g.c,E.b,g.d],pipes:[t.b,t.d],styles:[".cdk-overlay-connected-position-bounding-box{z-index:10000!important}  .cdk-global-overlay-wrapper{z-index:1000!important}"]}),e}(),w=i("5QHs"),O=i("LUZP"),H=i("OaSA"),x=i("PSD3"),j=i.n(x);function F(e,a){void 0===a&&(a=1e3),$.notify({icon:"notifications",message:e},{type:"warning",timer:a,placement:{from:"bottom",align:"right"},template:'<div data-notify="container" class="col-xs-11 col-sm-3 alert alert-{0} alert-with-icon" role="alert"><button mat-raised-button type="button" aria-hidden="true" class="close" data-notify="dismiss">  <i class="material-icons">close</i></button><i class="material-icons" data-notify="icon">notifications</i> <span data-notify="title">{1}</span> <span data-notify="message">{2}</span><div class="progress" data-notify="progressbar"><div class="progress-bar progress-bar-{0}" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;"></div></div><a href="{3}" target="{4}" data-notify="url"></a></div>'})}var I=i("KNNI"),M=i("xJVD"),z=i("bQra"),L=i("iInd"),N=i("o4Yh"),q=i("ZFy/"),_=i("Tj54"),V=i("zQhy"),X=i("TN/R"),Q=i("BSbQ"),W=i("pMoy"),Z=function(){return(Z=Object.assign||function(e){for(var a,i=1,t=arguments.length;i<t;i++)for(var o in a=arguments[i])Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o]);return e}).apply(this,arguments)},J=function(){for(var e=0,a=0,i=arguments.length;a<i;a++)e+=arguments[a].length;var t=Array(e),o=0;for(a=0;a<i;a++)for(var n=arguments[a],s=0,r=n.length;s<r;s++,o++)t[o]=n[s];return t};function Y(e,a){1&e&&(v.Ub(0,"div",2),v.Ub(1,"div",3),v.Ub(2,"div",4),v.Ub(3,"div",5),v.Ub(4,"div",6),v.Ub(5,"div",7),v.Ub(6,"div",8),v.Ub(7,"i",9),v.Bc(8,"pending_actions"),v.Tb(),v.Tb(),v.Ub(9,"h4",10),v.Bc(10,"En espera de aprobaci\xf3n"),v.Tb(),v.Tb(),v.Ub(11,"div",11),v.Ub(12,"h5",12),v.Bc(13,"Validaci\xf3n de Enrolamiento"),v.Tb(),v.Ub(14,"p",13),v.Bc(15,"Su proceso de enrolamiento est\xe1 en curso. Una vez que tengamos la aprobaci\xf3n usted podr\xe1 realizar esta actividad"),v.Tb(),v.Ub(16,"a",14),v.Bc(17,"Le notificaremos en breves momentos al correo registrado en el portal"),v.Tb(),v.Tb(),v.Tb(),v.Tb(),v.Tb(),v.Tb(),v.Tb())}function G(e,a){if(1&e){var i=v.Vb();v.Ub(0,"a",22),v.bc("click",function(){return v.uc(i),v.fc(2).crearSolicitudIngreso()}),v.Bc(1,"Crear Solicitud"),v.Tb()}}function K(e,a){if(1&e&&(v.Ub(0,"div",2),v.Ub(1,"div",4),v.Ub(2,"div",15),v.Ub(3,"div",16),v.Ub(4,"h6",17),v.Bc(5," Solicitud de ingreso"),v.Tb(),v.Ub(6,"div",11),v.Ub(7,"div",18),v.Ub(8,"i",9),v.Bc(9,"dashboard_customize"),v.Tb(),v.Tb(),v.Ub(10,"p",19),v.Bc(11,"Crea una nueva solicitud de ingreso"),v.Tb(),v.Tb(),v.Ub(12,"div",20),v.Ac(13,G,2,0,"a",21),v.gc(14,"async"),v.Tb(),v.Tb(),v.Tb(),v.Tb(),v.Tb()),2&e){var i=v.fc();v.Db(13),v.lc("ngIf",0==v.hc(14,1,i.loading$))}}function ee(e,a){1&e&&(v.Ub(0,"div",23),v.ec(),v.Ub(1,"svg",24),v.Pb(2,"circle",25),v.Tb(),v.Tb())}function ae(e,a){1&e&&(v.Ub(0,"div",4),v.Ub(1,"div",53),v.Ub(2,"small"),v.Bc(3,"Aun no ha reservado sus posiciones"),v.Tb(),v.Tb(),v.Tb())}function ie(e,a){1&e&&v.Pb(0,"mat-divider")}function te(e,a){1&e&&(v.Ub(0,"th",69),v.Bc(1,"Est\xe1ndar "),v.Tb())}function oe(e,a){if(1&e&&(v.Ub(0,"td",70),v.Bc(1),v.Tb()),2&e){var i=a.$implicit;v.Db(1),v.Dc(" ",i.DescStandar," ")}}function ne(e,a){1&e&&(v.Ub(0,"td",71),v.Bc(1," \xa0 "),v.Tb())}function se(e,a){1&e&&(v.Ub(0,"th",69),v.Bc(1," Tarifa "),v.Tb())}function re(e,a){if(1&e&&(v.Ub(0,"td",70),v.Bc(1),v.Tb()),2&e){var i=a.$implicit;v.Db(1),v.Dc(" ",i.DescTipoTarifa,"")}}function ce(e,a){1&e&&(v.Ub(0,"td",71),v.Bc(1," \xa0 "),v.Tb())}function de(e,a){1&e&&(v.Ub(0,"th",69),v.Bc(1," Cantidad "),v.Tb())}function le(e,a){if(1&e&&(v.Ub(0,"td",70),v.Bc(1),v.Tb()),2&e){var i=a.$implicit;v.Db(1),v.Dc(" ",i.CantidadRequerida,"")}}function be(e,a){if(1&e&&(v.Ub(0,"td",72),v.Bc(1),v.Tb()),2&e){var i=v.fc(3);v.Db(1),v.Dc(" ",i.getCantidadTotal()," ")}}function ue(e,a){1&e&&(v.Ub(0,"th",69),v.Bc(1," Observaciones adicionales "),v.Tb())}function pe(e,a){if(1&e&&(v.Ub(0,"td",70),v.Bc(1),v.Tb()),2&e){var i=a.$implicit;v.Db(1),v.Dc(" ",i.ObservacionesAdicionales," ")}}function me(e,a){1&e&&(v.Ub(0,"td",71),v.Bc(1," \xa0 "),v.Tb())}function he(e,a){1&e&&(v.Ub(0,"th",73),v.Bc(1," Acciones "),v.Tb())}function fe(e,a){if(1&e){var i=v.Vb();v.Ub(0,"td",74),v.Ub(1,"button",75),v.bc("click",function(){v.uc(i);var e=a.$implicit;return v.fc(3).editarReserva(e)}),v.Ub(2,"mat-icon"),v.Bc(3,"edit"),v.Tb(),v.Tb(),v.Ub(4,"button",76),v.bc("click",function(){v.uc(i);var e=a.$implicit;return v.fc(3).eliminarReserva(e)}),v.Ub(5,"mat-icon"),v.Bc(6,"delete"),v.Tb(),v.Tb(),v.Tb()}}function ve(e,a){1&e&&(v.Ub(0,"td",71),v.Bc(1," \xa0 "),v.Tb())}function Te(e,a){1&e&&v.Pb(0,"tr",77)}function Ce(e,a){1&e&&v.Pb(0,"tr",78)}function ge(e,a){1&e&&v.Pb(0,"tr",79)}function De(e,a){if(1&e&&(v.Ub(0,"div",4),v.Ub(1,"div",53),v.Ub(2,"table",54),v.Sb(3,55),v.Ac(4,te,2,0,"th",56),v.Ac(5,oe,2,1,"td",57),v.Ac(6,ne,2,0,"td",58),v.Rb(),v.Sb(7,59),v.Ac(8,se,2,0,"th",56),v.Ac(9,re,2,1,"td",57),v.Ac(10,ce,2,0,"td",58),v.Rb(),v.Sb(11,60),v.Ac(12,de,2,0,"th",56),v.Ac(13,le,2,1,"td",57),v.Ac(14,be,2,1,"td",61),v.Rb(),v.Sb(15,62),v.Ac(16,ue,2,0,"th",56),v.Ac(17,pe,2,1,"td",57),v.Ac(18,me,2,0,"td",58),v.Rb(),v.Sb(19,63),v.Ac(20,he,2,0,"th",64),v.Ac(21,fe,7,0,"td",65),v.Ac(22,ve,2,0,"td",58),v.Rb(),v.Ac(23,Te,1,0,"tr",66),v.Ac(24,Ce,1,0,"tr",67),v.Ac(25,ge,1,0,"tr",68),v.Tb(),v.Pb(26,"br"),v.Tb(),v.Tb()),2&e){var i=v.fc(2);v.Db(2),v.lc("dataSource",i.datasourceReservaPosiciones),v.Db(21),v.lc("matHeaderRowDef",i.displayedColumnsReserva),v.Db(1),v.lc("matRowDefColumns",i.displayedColumnsReserva),v.Db(1),v.lc("matFooterRowDef",i.displayedColumnsReserva)}}function Ue(e,a){1&e&&(v.Ub(0,"th",69),v.Bc(1," Horas disponibles "),v.Tb())}function ye(e,a){if(1&e&&(v.Ub(0,"td",70),v.Bc(1),v.Tb()),2&e){var i=a.$implicit;v.Db(1),v.Dc(" ",i.Tramo," ")}}function Re(e,a){1&e&&(v.Ub(0,"th",69),v.Bc(1," Fecha de ingreso "),v.Tb())}function Pe(e,a){if(1&e&&(v.Ub(0,"td",70),v.Bc(1),v.gc(2,"date"),v.Tb()),2&e){var i=v.fc(3);v.Db(1),v.Dc(" ",v.ic(2,1,i.diaDespachoSeleccionado,"dd-MM-yyyy")," ")}}function Ee(e,a){1&e&&(v.Ub(0,"th",91),v.Bc(1," Reservar "),v.Tb())}function Ae(e,a){if(1&e){var i=v.Vb();v.Ub(0,"td",92),v.Ub(1,"mat-checkbox",93),v.bc("change",function(e){v.uc(i);var t=a.$implicit;return v.fc(3).changeChecbox(t,e.checked)}),v.Tb(),v.Tb()}if(2&e){var t=a.$implicit;v.Db(1),v.lc("disabled",!t.activo||!1)("checked",t.seleccionado||!1)}}function Be(e,a){1&e&&v.Pb(0,"tr",77)}function Se(e,a){1&e&&v.Pb(0,"tr",78)}function ke(e,a){if(1&e&&(v.Ub(0,"div",4),v.Ub(1,"div",80),v.Ub(2,"div",81),v.Ub(3,"i",82),v.Bc(4,"notifications"),v.Tb(),v.Pb(5,"span",83),v.Ub(6,"span",84),v.Bc(7),v.Tb(),v.Tb(),v.Tb(),v.Ub(8,"div",53),v.Ub(9,"table",85),v.Sb(10,86),v.Ac(11,Ue,2,0,"th",56),v.Ac(12,ye,2,1,"td",57),v.Rb(),v.Sb(13,87),v.Ac(14,Re,2,0,"th",56),v.Ac(15,Pe,3,4,"td",57),v.Rb(),v.Sb(16,88),v.Ac(17,Ee,2,0,"th",89),v.Ac(18,Ae,2,2,"td",90),v.Rb(),v.Ac(19,Be,1,0,"tr",66),v.Ac(20,Se,1,0,"tr",67),v.Tb(),v.Tb(),v.Tb()),2&e){var i=v.fc(2);v.Db(7),v.Dc("De acuerdo a la cantidad de ubicaciones requeridas, debe seleccionar ",i.cantidadTramos," rango(s) de horario "),v.Db(2),v.lc("dataSource",i.datasourceTramosHoras),v.Db(10),v.lc("matHeaderRowDef",i.displayedColumnsTramoHoras),v.Db(1),v.lc("matRowDefColumns",i.displayedColumnsTramoHoras)}}function we(e,a){if(1&e&&(v.Ub(0,"mat-option",94),v.Bc(1),v.Tb()),2&e){var i=a.$implicit;v.lc("value",i.Cod),v.Db(1),v.Dc(" ",i.Descripcion," ")}}function Oe(e,a){if(1&e&&(v.Ub(0,"mat-option",94),v.Bc(1),v.Tb()),2&e){var i=a.$implicit;v.lc("value",i.CodBanco),v.Db(1),v.Dc(" ",i.DescripcionBanco," ")}}function He(e,a){if(1&e&&(v.Ub(0,"mat-option",94),v.Bc(1),v.Tb()),2&e){var i=a.$implicit;v.lc("value",i.CodTipodeCuenta),v.Db(1),v.Dc(" ",i.DescTipodeCuenta," ")}}function xe(e,a){if(1&e){var i=v.Vb();v.Ub(0,"div",2),v.Ub(1,"div",3),v.Ub(2,"h2"),v.Bc(3," Solicitud de registro en curso "),v.Ub(4,"b"),v.Bc(5),v.Tb(),v.Tb(),v.Ub(6,"div",4),v.Ub(7,"div",26),v.Ub(8,"div",27),v.Ub(9,"div",28),v.Ub(10,"div",8),v.Ub(11,"i",9),v.Bc(12,"content_copy"),v.Tb(),v.Tb(),v.Ub(13,"p",17),v.Bc(14,"Altura Base 1.0"),v.Tb(),v.Ub(15,"h3",10),v.Bc(16),v.Ub(17,"small"),v.Bc(18,"disponible"),v.Tb(),v.Tb(),v.Tb(),v.Ub(19,"div",29),v.Ub(20,"div",30),v.Ub(21,"i",31),v.Bc(22,"update"),v.Tb(),v.Ub(23,"span"),v.Bc(24),v.gc(25,"date"),v.Tb(),v.Tb(),v.Tb(),v.Tb(),v.Tb(),v.Ub(26,"div",26),v.Ub(27,"div",27),v.Ub(28,"div",28),v.Ub(29,"div",8),v.Ub(30,"i",9),v.Bc(31,"content_copy"),v.Tb(),v.Tb(),v.Ub(32,"p",17),v.Bc(33,"Altura Media 1.5"),v.Tb(),v.Ub(34,"h3",10),v.Bc(35),v.Ub(36,"small"),v.Bc(37,"disponible"),v.Tb(),v.Tb(),v.Tb(),v.Ub(38,"div",29),v.Ub(39,"div",30),v.Ub(40,"i",31),v.Bc(41,"update"),v.Tb(),v.Ub(42,"span"),v.Bc(43),v.gc(44,"date"),v.Tb(),v.Tb(),v.Tb(),v.Tb(),v.Tb(),v.Ub(45,"div",26),v.Ub(46,"div",27),v.Ub(47,"div",28),v.Ub(48,"div",8),v.Ub(49,"i",9),v.Bc(50,"content_copy"),v.Tb(),v.Tb(),v.Ub(51,"p",17),v.Bc(52,"Altura M\xe1xima 1.8"),v.Tb(),v.Ub(53,"h3",10),v.Bc(54),v.Ub(55,"small"),v.Bc(56,"disponible"),v.Tb(),v.Tb(),v.Tb(),v.Ub(57,"div",29),v.Ub(58,"div",30),v.Ub(59,"i",31),v.Bc(60,"update"),v.Tb(),v.Ub(61,"span"),v.Bc(62),v.gc(63,"date"),v.Tb(),v.Tb(),v.Tb(),v.Tb(),v.Tb(),v.Tb(),v.Ub(64,"div",4),v.Ub(65,"div",32),v.Ub(66,"mat-expansion-panel",33),v.Ub(67,"mat-expansion-panel-header"),v.Ub(68,"mat-panel-title"),v.Bc(69," Reserva de posiciones "),v.Tb(),v.Ub(70,"mat-panel-description"),v.Bc(71," \xa0 "),v.Tb(),v.Tb(),v.Ac(72,ae,4,0,"div",34),v.Ac(73,ie,1,0,"mat-divider",35),v.Ac(74,De,27,4,"div",34),v.Pb(75,"br"),v.Ub(76,"div",4),v.Ub(77,"div",36),v.Ub(78,"button",37),v.bc("click",function(){return v.uc(i),v.fc().showReservaPosicion()}),v.Ub(79,"mat-icon"),v.Bc(80,"add"),v.Tb(),v.Tb(),v.Tb(),v.Tb(),v.Tb(),v.Tb(),v.Tb(),v.Pb(81,"br"),v.Ub(82,"div",4),v.Ub(83,"div",32),v.Ub(84,"mat-expansion-panel",33),v.Ub(85,"mat-expansion-panel-header"),v.Ub(86,"mat-panel-title"),v.Bc(87," Configurar condiciones "),v.Tb(),v.Ub(88,"mat-panel-description"),v.Bc(89," \xa0 "),v.Tb(),v.Tb(),v.Ub(90,"div",4),v.Ub(91,"div",38),v.Ub(92,"div",39),v.Ub(93,"label",40),v.Bc(94,"\xbfContiene material peligroso?"),v.Tb(),v.Ub(95,"mat-radio-group",41),v.Ub(96,"mat-radio-button",42),v.Bc(97,"Si"),v.Tb(),v.Ub(98,"mat-radio-button",43),v.Bc(99,"No"),v.Tb(),v.Tb(),v.Tb(),v.Tb(),v.Tb(),v.Ub(100,"div",4),v.Ub(101,"div",38),v.Ub(102,"mat-form-field",44),v.Ub(103,"mat-label"),v.Bc(104,"Fecha Ingreso"),v.Tb(),v.Ub(105,"input",45),v.bc("dateChange",function(e){return v.uc(i),v.fc().addEvent("change",e)}),v.Tb(),v.Pb(106,"mat-datepicker-toggle",46),v.Pb(107,"mat-datepicker",47,48),v.Tb(),v.Tb(),v.Tb(),v.Ac(109,ke,21,4,"div",34),v.Tb(),v.Tb(),v.Tb(),v.Pb(110,"br"),v.Ub(111,"div",4),v.Ub(112,"div",32),v.Ub(113,"mat-expansion-panel",33),v.Ub(114,"mat-expansion-panel-header"),v.Ub(115,"mat-panel-title"),v.Bc(116," Datos de facturaci\xf3n "),v.Tb(),v.Ub(117,"mat-panel-description"),v.Bc(118," \xa0 "),v.Tb(),v.Tb(),v.Ub(119,"div",4),v.Ub(120,"div",38),v.Ub(121,"mat-form-field",44),v.Ub(122,"mat-label"),v.Bc(123,"Tipo de pago"),v.Tb(),v.Ub(124,"mat-select",49),v.Ub(125,"mat-option"),v.Bc(126,"--"),v.Tb(),v.Ac(127,we,2,2,"mat-option",50),v.Tb(),v.Tb(),v.Tb(),v.Ub(128,"div",38),v.Ub(129,"mat-form-field",44),v.Ub(130,"mat-label"),v.Bc(131,"Banco"),v.Tb(),v.Ub(132,"mat-select",49),v.Ub(133,"mat-option"),v.Bc(134,"--"),v.Tb(),v.Ac(135,Oe,2,2,"mat-option",50),v.Tb(),v.Tb(),v.Tb(),v.Tb(),v.Ub(136,"div",4),v.Ub(137,"div",38),v.Ub(138,"mat-form-field",44),v.Ub(139,"mat-label"),v.Bc(140,"Tipo de Cuenta"),v.Tb(),v.Ub(141,"mat-select",49),v.Ub(142,"mat-option"),v.Bc(143,"--"),v.Tb(),v.Ac(144,He,2,2,"mat-option",50),v.Tb(),v.Tb(),v.Tb(),v.Ub(145,"div",38),v.Ub(146,"mat-form-field",44),v.Pb(147,"input",51),v.Tb(),v.Tb(),v.Tb(),v.Tb(),v.Tb(),v.Tb(),v.Pb(148,"br"),v.Ub(149,"div",4),v.Ub(150,"div",32),v.Ub(151,"button",52),v.bc("click",function(){return v.uc(i),v.fc().confirmarReserva()}),v.Bc(152,"Confirmar Reserva"),v.Tb(),v.Tb(),v.Tb(),v.Tb(),v.Tb()}if(2&e){var t=v.sc(108),o=v.fc();v.Db(5),v.Cc(o.CasoEnCursoControlAlmacenaje.NumerodeCaso),v.Db(11),v.Dc("",o.disponibleBase," "),v.Db(8),v.Dc("actualizado: ",v.ic(25,24,o.fechaActualizacion,"HH:mm"),""),v.Db(11),v.Dc("",o.disponibleMedia," "),v.Db(8),v.Dc("actualizado: ",v.ic(44,27,o.fechaActualizacion,"HH:mm"),""),v.Db(11),v.Dc("",o.disponibleMaxima," "),v.Db(8),v.Dc("actualizado: ",v.ic(63,30,o.fechaActualizacion,"HH:mm"),""),v.Db(10),v.lc("ngIf",0==o.listadoReservas.length),v.Db(1),v.lc("ngIf",0==o.listadoReservas.length),v.Db(1),v.lc("ngIf",o.listadoReservas.length>0),v.Db(4),v.lc("disabled",o.listadoReservas.length>0),v.Db(17),v.lc("formControl",o.checkMaterialPeligrosoFormControl),v.Db(10),v.lc("formControl",o.selectDiaPagoFormControl)("matDatepicker",t)("min",o.minDateReserva),v.Db(1),v.lc("for",t),v.Db(3),v.lc("ngIf",null!=o.diaDespachoSeleccionado&&o.listadoReservas.length>0),v.Db(15),v.lc("formControl",o.selectTipoPagoFormControl),v.Db(3),v.lc("ngForOf",o.listadoTipoPago),v.Db(5),v.lc("formControl",o.selectBancoFormControl),v.Db(3),v.lc("ngForOf",o.listadoBancos),v.Db(6),v.lc("formControl",o.selectTipodeCuentaFormControl),v.Db(3),v.lc("ngForOf",o.listadoCuentas),v.Db(3),v.lc("formControl",o.NumerodeCuenta)}}var je=function(){function e(e,a,i,t,n,s){this.fb=e,this.authService=a,this.storageService=i,this.store=t,this.dialog=n,this.datepipe=s,this.subs=new f.a,this.habilitado=!1,this.vistaMainPanel=!0,this.fechaActualizacion=new Date,this.disponibleBase=0,this.disponibleMedia=0,this.disponibleMaxima=0,this.cantidadAcumuladaSeleccionadaBase=0,this.cantidadAcumuladaSeleccionadaMedia=0,this.cantidadAcumuladaSeleccionadaMaxima=0,this.listadoTipoPago=[],this.listadoReservas=[],this.listadoHoras=[],this.listadoParametros=[],this.listadoBancos=[],this.listadoCuentas=[],this.displayedColumnsTramoHoras=["horaDisponible","fechaIngreso","reservar"],this.displayedColumnsReserva=["estandar","tarifa","cantidad","observaciones","acciones"],this.datasourceTramosHoras=new H.o,this.datasourceReservaPosiciones=new H.o,this.selectDiaPagoFormControl=new o.e("",o.u.required),this.selectFrecPagoFormControl=new o.e("",o.u.required),this.checkMaterialPeligrosoFormControl=new o.e("",o.u.required),this.selectTipodeCuentaFormControl=new o.e("",o.u.required),this.selectTipoPagoFormControl=new o.e("",o.u.required),this.selectBancoFormControl=new o.e("",o.u.required),this.NumerodeCuenta=new o.e("",o.u.required),this.minDateReserva=new Date,this.posicionesReservadas=[],this.cantidadTramos=0}return e.prototype.ngAfterViewInit=function(){this.datasourceTramosHoras.data=this.listadoHoras,this.datasourceReservaPosiciones.data=this.listadoReservas},e.prototype.ngOnInit=function(){var e=this;this.store.dispatch(Object(I.a)()),this.loadData(),this.addListener(),this.selectDiaPagoFormControl.registerOnChange(function(a){a&&(e.diaDespachoSeleccionado=a,e.calcularCantidadTramos())}),this.loading$=this.store.select("ui").pipe(Object(n.a)(function(e){return e.isLoading})),this.minDateReserva.setDate(this.minDateReserva.getDate()+1)},e.prototype.loadData=function(){this.store.dispatch(Object(M.a)()),this.store.dispatch(Object(z.a)()),this.store.dispatch(Object(h.j)()),this.store.dispatch(Object(h.s)()),this.store.dispatch(Object(h.m)()),this.store.dispatch(Object(h.v)()),this.authService.getEmpresaStorage(),this.store.dispatch(Object(h.p)())},e.prototype.ngOnDestroy=function(){this.subs&&this.subs.unsubscribe()},e.prototype.calcularCantidadTramos=function(){var e=this.listadoParametros.find(function(e){return e.CodParametro==m.a.id_cantidadMaximaIngreso}),a=50;null==e&&null==e||(a=e.Valor);var i=this.getCantidadTotal();this.cantidadTramos=i%a==0?i/a:Math.ceil(i/a)},e.prototype.crearSolicitudIngreso=function(){this.storageService.prepararCreacionSolicitud(this.idEntityEmpresa),this.store.dispatch(Object(I.a)())},e.prototype.addListener=function(){var e=this;this.subs.sink=this.store.select("bancos").subscribe(function(a){a.loaded&&(e.listadoBancos=J(a.bizagiResponse.Entities.BancodeCargo))}),this.subs.sink=this.store.select("tipoCuenta").subscribe(function(a){a.loaded&&(e.listadoCuentas=J(a.bizagiResponse.Entities.TipodeCuenta))}),this.subs.sink=this.store.select("parametros").subscribe(function(a){if(a.loaded){var i=a.bizagiResponse.Entities.ParametrosSistema;null!=i&&i.length>0&&(e.listadoParametros=J(i))}}),this.subs.sink=this.store.select("registroSolicitud").subscribe(function(a){a.loading?e.store.dispatch(Object(I.a)()):a.loaded&&(e.store.dispatch(Object(I.b)()),null!=a.bizagiResponse.processes&&null!=a.bizagiResponse.processes?null!=e.idEntityEmpresa&&""!=e.idEntityEmpresa&&e.storageService.getCasosPendientes(e.idEntityEmpresa,"True"):a.loaded&&null==a.error&&(e.store.dispatch(Object(I.b)()),null!=a.bizagiResponse.Entities&&null!=a.bizagiResponse.Entities.ControlDeAlmacenaje&&"True"==a.bizagiResponse.Entities.ControlDeAlmacenaje.EnCompletarRegistro?e.poblarRegistroSolicitud(a.bizagiResponse.Entities.ControlDeAlmacenaje):e.vistaMainPanel=!0))}),this.subs.sink=this.store.select("actualizarcaso").subscribe(function(a){a.loading?(j.a.fire({title:"Actualizaci\xf3n de Reserva de posiciones",text:"Actualizando la informaci\xf3n en nuestros sistemas, espere por favor.",icon:"info",allowOutsideClick:!1}),j.a.showLoading()):a.loaded?null!=a.bizagiResponse.Entities&&null!=a.bizagiResponse.Entities.ControlDeAlmacenaje&&e.store.dispatch(Object(h.a)({idCase:e.CasoEnCursoControlAlmacenaje.NumerodeCaso,taskName:m.a.taskIDCompletarRegistro})):a.error&&(console.log(a.error),j.a.close())}),this.subs.sink=this.store.select("performRegistro").subscribe(function(a){if(a.loaded){e.store.dispatch(Object(I.b)()),j.a.close();var i=a.bizagiResponse.processes;null!=i&&null!=i&&null!=i.process&&(null!=i.process.processError&&null!=i.process.processError&&""==i.process.processError.errorCode?(e.storageService.getCasosPendientes(e.idEntityEmpresa,"True"),j.a.fire({title:"Actualizaci\xf3n de Reserva de posiciones",icon:"success",timer:2e3,text:"Solicitud "+e.CasoEnCursoControlAlmacenaje.NumerodeCaso+" procesada exitosamente."})):F(i.process.processError.errorMessage)),console.log(a.bizagiResponse)}}),this.subs.sink=this.store.select("user").subscribe(function(a){a&&a.user&&(e.habilitado=!!a.user.habilitado,e.store.dispatch(Object(I.b)()))}),this.subs.sink=this.store.select("empresa").subscribe(function(a){var i=a.empresa;i&&(e.store.dispatch(Object(I.a)()),e.idEntityEmpresa=i.id,e.storageService.getCasosPendientes(e.idEntityEmpresa,"True"))}),this.subs.sink=this.store.select("tramohoras").pipe(Object(n.a)(function(e){var a=[];return e.loaded&&null==e.error&&e.bizagiResponse.Entities.TramodeHoras.forEach(function(e){a.push({CodigoTramo:e.CodigoTramo,Tramo:e.Tramo,id:e._attributes.key,seleccionado:!1,activo:!0})}),a}),Object(s.a)(function(a){if(e.datepipe.transform(e.diaDespachoSeleccionado,"ddMMyyyy")===e.datepipe.transform(Date.now(),"ddMMyyyy")){var i=Number.parseInt(e.datepipe.transform(Date.now(),"HH"));a.forEach(function(e){try{var a=Number.parseInt(e.Tramo.split(":")[0]);i>=a&&(e.activo=!1)}catch(t){}})}})).subscribe(function(a){a&&(e.listadoHoras=J(a),e.datasourceTramosHoras.data=J(e.listadoHoras))}),this.cargarFrecuenciaCobro(),this.subs.sink=this.store.select("ubicaciones").subscribe(function(a){a.loaded&&null==a.error&&""!=a.bizagiResponse.Entities&&e.poblarUbicaciones(a.bizagiResponse.Entities.NewUbicaciones)})},e.prototype.cargarFrecuenciaCobro=function(){var e=this;this.subs.sink=this.store.select("frecuenciaCobro").subscribe(function(a){a.loaded&&null==a.error&&(e.listadoTipoPago=J(a.bizagiResponse.Entities.TipodePago))})},e.prototype.poblarRegistroSolicitud=function(e){var a=this;if(Array.isArray(e)&&e.length>0?(this.CasoEnCursoControlAlmacenaje=e[e.length-1],this.vistaMainPanel=!1):(this.CasoEnCursoControlAlmacenaje=e,this.vistaMainPanel=!1),null!=this.CasoEnCursoControlAlmacenaje.ReservadePosiciones){var i=[];Array.isArray(this.CasoEnCursoControlAlmacenaje.ReservadePosiciones.ReservadePosiciones)?i=this.CasoEnCursoControlAlmacenaje.ReservadePosiciones.ReservadePosiciones:i.push(this.CasoEnCursoControlAlmacenaje.ReservadePosiciones.ReservadePosiciones),i.forEach(function(e){var i=Z({},e);i.id=D.v4(),i.CantidadRequerida=Number.parseInt(e.CantidadRequerida),i.CodigodeEstandar=Number.parseInt(e.CodigodeEstandar),i.TipodeTarifa=Number.parseInt(e.TipodeTarifa),i.ControlDeAlmacenaje=Number.parseInt(e.ControlDeAlmacenaje),i.Standar=Number.parseInt(e.CodigodeEstandar),a.subs.sink=a.store.select("estandar").subscribe(function(t){if(t.loaded){var o=t.bizagiResponse.Entities.EstandardelaUbicacion.filter(function(e){return e._attributes.key==i.CodigodeEstandar})[0];o&&(i.DescStandar=o.DescEstandar,a.subs.sink=a.store.select("tarifa").subscribe(function(a){if(a.loaded){var t=a.bizagiResponse.Entities.TipodeTarifa.filter(function(a){return a._attributes.key==e.TipodeTarifa})[0];i.DescTipoTarifa=null==t?void 0:t.DescTipodeTarifa}}))}}),a.listadoReservas.push(i)}),this.datasourceReservaPosiciones.data=J(this.listadoReservas),this.calcularPosicionesDisponibles(),this.calcularCantidadTramos()}if(this.CasoEnCursoControlAlmacenaje.UbicacionesDisponiblespo.UbicacionesDisponiblespo.forEach(function(e){"1"==e.Estandar?a.disponibleBase=Number.parseInt(e.CantidadDisponible):"2"==e.Estandar?a.disponibleMedia=Number.parseInt(e.CantidadDisponible):"3"==e.Estandar&&(a.disponibleMaxima=Number.parseInt(e.CantidadDisponible))}),null==this.CasoEnCursoControlAlmacenaje.FrecuenciadeCobro&&null==this.CasoEnCursoControlAlmacenaje.FrecuenciadeCobro||(this.subs.sink=this.store.select("frecuenciaCobro").subscribe(function(e){e.loaded&&a.selectFrecPagoFormControl.setValue(a.CasoEnCursoControlAlmacenaje.FrecuenciadeCobro.CodFrecuencia)})),null==this.CasoEnCursoControlAlmacenaje.DeclaraquenocontieneM&&null==this.CasoEnCursoControlAlmacenaje.DeclaraquenocontieneM||this.checkMaterialPeligrosoFormControl.setValue("True"==this.CasoEnCursoControlAlmacenaje.DeclaraquenocontieneM?"1":"0"),this.selectDiaPagoFormControl.setValue(this.CasoEnCursoControlAlmacenaje.FechaHoraIngreso,{emitEvent:!0}),null!=this.CasoEnCursoControlAlmacenaje.ListadodeHorasDisponibl){var t=[];Array.isArray(this.CasoEnCursoControlAlmacenaje.ListadodeHorasDisponibl.ListadodeHorasDisponibles)?t=this.CasoEnCursoControlAlmacenaje.ListadodeHorasDisponibl.ListadodeHorasDisponibles:t.push(this.CasoEnCursoControlAlmacenaje.ListadodeHorasDisponibl.ListadodeHorasDisponibles),null!=t&&t.forEach(function(e){var i=a.listadoHoras.filter(function(a){return a.CodigoTramo==e.Tramosdisponibles});null!=i&&(i[0].seleccionado=!0)})}},e.prototype.addEvent=function(e,a){this.diaDespachoSeleccionado=a.value},e.prototype.confirmarReserva=function(){var e=this;if(0!=this.datasourceReservaPosiciones.data.length){var a=this.datasourceTramosHoras.data.filter(function(e){return 1==e.seleccionado}).length;0!=a?a<this.cantidadTramos?F("Le falta seleccionar "+(this.cantidadTramos-a)+" tramo(s) para asegurar la disponibilidad horaria de sus reservas"):this.checkMaterialPeligrosoFormControl.invalid?F("Debe declarar si contiene material peligroso."):this.selectBancoFormControl.invalid?F("Debe seleccionar el Banco"):this.selectTipoPagoFormControl.invalid?F("Debe seleccionar el Tipo de Pago"):this.selectTipodeCuentaFormControl.invalid?F("Debe seleccionar el Tipo de Cuenta"):this.NumerodeCuenta.invalid?F("Debe ingresar el n\xfamero de la cuenta."):j.a.fire({title:"\xbfDesea cursar la solicitud para procesar la recepci\xf3n?",icon:"question",allowOutsideClick:!1,showCancelButton:!0,showConfirmButton:!0}).then(function(a){a.isConfirmed&&e.procesarActualizacionCasoPerformActivity()}):F("Debe indicar el horario en el cual realizar\xe1 la entrega")}else F("Debe indicar las posiciones que desea reservar")},e.prototype.procesarActualizacionCasoPerformActivity=function(){var e=this.selectBancoFormControl.value,a=this.selectTipoPagoFormControl.value,i=this.selectTipodeCuentaFormControl.value,t=this.NumerodeCuenta.value;this.storageService.actualizarCasoRecepcion(this.datasourceReservaPosiciones.data,this.datasourceTramosHoras.data.filter(function(e){return e.seleccionado}),this.checkMaterialPeligrosoFormControl.value,this.CasoEnCursoControlAlmacenaje._attributes.key,this.datepipe.transform(this.diaDespachoSeleccionado,"yyyy-MM-dd"),e,a,i,t)},e.prototype.changeChecbox=function(e,a){e.seleccionado=a,this.datasourceTramosHoras.data.filter(function(e){return 1==e.seleccionado}).length==this.cantidadTramos?this.datasourceTramosHoras.data.filter(function(e){return 0==e.seleccionado}).forEach(function(e){return e.activo=!1}):this.datasourceTramosHoras.data.forEach(function(e){return e.activo=!0})},e.prototype.showReservaPosicion=function(){var e=this,a=this.dialog.open(k,{width:"50%",disableClose:!0,data:{disponibleBase:this.disponibleBase-this.cantidadAcumuladaSeleccionadaBase,disponibleMedia:this.disponibleMedia-this.cantidadAcumuladaSeleccionadaMedia,disponibleMaxima:this.disponibleMaxima-this.cantidadAcumuladaSeleccionadaMaxima}});this.subs.sink=a.beforeClosed().subscribe(function(a){null!=a&&(e.populateReservaPosicionFromDialog(a),e.calcularPosicionesDisponibles(),e.calcularCantidadTramos())})},e.prototype.editarReserva=function(e){var a=this,i=this.dialog.open(k,{width:"50%",disableClose:!0,data:{disponibleBase:this.disponibleBase-this.cantidadAcumuladaSeleccionadaBase,disponibleMedia:this.disponibleMedia-this.cantidadAcumuladaSeleccionadaMedia,disponibleMaxima:this.disponibleMaxima-this.cantidadAcumuladaSeleccionadaMaxima,reserva:e}});this.subs.sink=i.beforeClosed().subscribe(function(e){null!=e&&(a.populateReservaPosicionFromDialog(e),a.calcularPosicionesDisponibles(),a.calcularCantidadTramos())})},e.prototype.populateReservaPosicionFromDialog=function(e){var a={ControlDeAlmacenaje:Number.parseInt(this.CasoEnCursoControlAlmacenaje._attributes.key),CantidadRequerida:e.cantidadRequerida,CodigodeEstandar:e.estandar._attributes.key,DescStandar:e.estandar.DescEstandar,ObservacionesAdicionales:e.observaciones,TipodeTarifa:e.tarifa._attributes.key,DescTipoTarifa:e.tarifa.DescTipodeTarifa,Standar:e.estandar._attributes.key,id:e.id},i=this.listadoReservas.find(function(e){return e.id===a.id});if(null==i||null==i)this.listadoReservas.push(a);else{var t=this.listadoReservas.indexOf(i);this.listadoReservas[t]=a}this.datasourceReservaPosiciones.data=J(this.listadoReservas)},e.prototype.eliminarReserva=function(e){var a=this;j.a.fire({title:"\xbfDesea eliminar esta reserva?",showConfirmButton:!0,showCancelButton:!0}).then(function(e){if(e.isConfirmed){var i=a.listadoReservas.find(function(e){return e.id==e.id}),t=a.listadoReservas.indexOf(i);a.listadoReservas.splice(t,1),a.datasourceReservaPosiciones.data=J(a.listadoReservas)}})},e.prototype.poblarUbicaciones=function(e){var a=this;Array.isArray(e)&&e.length>0?(console.log("existen posiciones reservadas para la fecha: "+this.diaDespachoSeleccionado),null==e||e.forEach(function(e){a.posicionesReservadas.push(e)})):console.log("no hay posiciones resservadas para dia: "+this.diaDespachoSeleccionado)},e.prototype.getCantidadTotal=function(){return this.listadoReservas.map(function(e){return e.CantidadRequerida}).reduce(function(e,a){return e+a},0)},e.prototype.calcularPosicionesDisponibles=function(){this.cantidadAcumuladaSeleccionadaBase=this.listadoReservas.filter(function(e){return 1==e.Standar}).map(function(e){return e.CantidadRequerida}).reduce(function(e,a){return e+a},0),this.cantidadAcumuladaSeleccionadaMedia=this.listadoReservas.filter(function(e){return 2==e.Standar}).map(function(e){return e.CantidadRequerida}).reduce(function(e,a){return e+a},0),this.cantidadAcumuladaSeleccionadaMaxima=this.listadoReservas.filter(function(e){return 3==e.Standar}).map(function(e){return e.CantidadRequerida}).reduce(function(e,a){return e+a},0)},e.\u0275fac=function(a){return new(a||e)(v.Ob(o.d),v.Ob(r.a),v.Ob(C),v.Ob(T.h),v.Ob(g.b),v.Ob(t.f))},e.\u0275cmp=v.Ib({type:e,selectors:[["app-registro"]],viewQuery:function(e,a){if(1&e&&(v.Ec(w.a,1),v.Ec(O.a,1)),2&e){var i=void 0;v.rc(i=v.cc())&&(a.paginator=i.first),v.rc(i=v.cc())&&(a.sort=i.first)}},decls:5,vars:6,consts:[["class","main-content",4,"ngIf"],["class","loader",4,"ngIf"],[1,"main-content"],[1,"container-fluid"],[1,"row"],[1,"col-md-8"],[1,"card"],[1,"card-header","card-header-icon","card-header-danger"],[1,"card-icon"],[1,"material-icons"],[1,"card-title"],[1,"card-body"],[1,"card-subtitle","mb-2","text-muted"],[1,"card-text"],["href","#",1,"card-link"],[1,"col-lg-4","col-md-6","mr-auto","ml-auto"],[1,"card","card-pricing"],[1,"card-category"],[1,"card-icon","icon-warning"],[1,"card-description"],[1,"card-footer","justify-content-center"],["class","btn btn-round btn-warning",3,"routerLink","click",4,"ngIf"],[1,"btn","btn-round","btn-warning",3,"routerLink","click"],[1,"loader"],["viewBox","25 25 50 50",1,"circular"],["cx","50","cy","50","r","20","fill","none","stroke-width","2","stroke-miterlimit","10",1,"path"],[1,"col","col-lg-4","col-md-4","col-sm-6"],[1,"card","card-stats"],[1,"card-header","card-header-warning","card-header-icon"],[1,"card-footer"],[1,"stats"],[1,"material-icons","text-danger"],[1,"col","col-lg-12","col-sm-12","col-md-12"],["expanded","true"],["class","row",4,"ngIf"],[4,"ngIf"],[1,"col","col-sm-12","pull-right"],["mat-mini-fab","","color","accent","matTooltip","Click aqu\xed para reservar posiciones","aria-label","Ingresar Posicion",3,"disabled","click"],[1,"col-md-6"],[2,"margin-top","10px"],["id","example-radio-group-label"],["aria-labelledby","material peligroso radio Butom",1,"example-radio-group",3,"formControl"],["value","1",1,"example-radio-button"],["value","0",1,"example-radio-button"],[1,"width-70"],["matInput","","required","","readonly","",3,"formControl","matDatepicker","min","dateChange"],["matSuffix","",3,"for"],["color","primary","disabled","false"],["pFechaIngreso",""],["required","",3,"formControl"],[3,"value",4,"ngFor","ngForOf"],["matInput","","type","text","placeholder","N\xfamero de Cuenta","required","",3,"formControl"],["mat-flat-button","","color","primary",1,"pull-right",3,"click"],[1,"col","col-sm-12"],["mat-table","",1,"mat-elevation-z2","tabla-ppp",3,"dataSource"],["matColumnDef","estandar"],["mat-header-cell","","mat-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-footer-cell","",4,"matFooterCellDef"],["matColumnDef","tarifa"],["matColumnDef","cantidad"],["mat-footer-cell","","style","padding: 10px;",4,"matFooterCellDef"],["matColumnDef","observaciones"],["matColumnDef","acciones"],["mat-header-cell","","mat-header","","style","text-align: right;",4,"matHeaderCellDef"],["mat-cell","","style","text-align: right;",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-footer-row","","class","first-footer-row",4,"matFooterRowDef"],["mat-header-cell","","mat-header",""],["mat-cell",""],["mat-footer-cell",""],["mat-footer-cell","",2,"padding","10px"],["mat-header-cell","","mat-header","",2,"text-align","right"],["mat-cell","",2,"text-align","right"],["mat-icon-button","","aria-label","Editar reserva",3,"click"],["mat-icon-button","","color","warn","aria-label","Editar reserva",3,"click"],["mat-header-row",""],["mat-row",""],["mat-footer-row","",1,"first-footer-row"],[1,"col-md-12"],["data-notify","container",1,"alert","alert-info","alert-with-icon"],["data-notify","icon",1,"material-icons"],["data-notify","icon",1,"now-ui-icons","ui-1_bell-53"],["data-notify","message"],["mat-table","","matSort","",1,"mat-elevation-z2","tabla-ppp",3,"dataSource"],["matColumnDef","horaDisponible"],["matColumnDef","fechaIngreso"],["matColumnDef","reservar"],["mat-header-cell","","style","text-align: center;","mat-header","",4,"matHeaderCellDef"],["mat-cell","","style","text-align: center;",4,"matCellDef"],["mat-header-cell","","mat-header","",2,"text-align","center"],["mat-cell","",2,"text-align","center"],[3,"disabled","checked","change"],[3,"value"]],template:function(e,a){1&e&&(v.Ac(0,Y,18,0,"div",0),v.Ac(1,K,15,3,"div",0),v.Ac(2,ee,3,0,"div",1),v.gc(3,"async"),v.Ac(4,xe,153,33,"div",0)),2&e&&(v.lc("ngIf",!a.habilitado),v.Db(1),v.lc("ngIf",a.habilitado&&a.vistaMainPanel),v.Db(1),v.lc("ngIf",v.hc(3,4,a.loading$)),v.Db(2),v.lc("ngIf",a.habilitado&&!a.vistaMainPanel))},directives:[t.m,L.f,N.b,N.d,N.e,N.c,E.b,q.a,_.a,V.b,o.o,o.f,V.a,U.c,U.f,P.b,o.c,X.b,o.t,X.d,U.g,X.a,y.a,R.m,t.l,Q.a,H.n,H.c,H.i,H.b,H.e,H.k,H.m,H.g,H.h,H.a,H.d,H.j,H.l,H.f,O.a,W.a],pipes:[t.b,t.f],styles:[".example-radio-group[_ngcontent-%COMP%]{display:inline;flex-direction:row;margin:15px 0}.example-radio-button[_ngcontent-%COMP%]{margin:5px}.tabla-posiciones-container[_ngcontent-%COMP%]{height:270px;overflow:auto}.first-footer-row[_ngcontent-%COMP%]{font-weight:700}"]}),e}(),Fe=function(){for(var e=0,a=0,i=arguments.length;a<i;a++)e+=arguments[a].length;var t=Array(e),o=0;for(a=0;a<i;a++)for(var n=arguments[a],s=0,r=n.length;s<r;s++,o++)t[o]=n[s];return t};function Ie(e,a){1&e&&(v.Ub(0,"div",1),v.Ub(1,"div",2),v.Ub(2,"div",4),v.Ub(3,"div",5),v.Ub(4,"div",6),v.Ub(5,"div",7),v.Ub(6,"div",8),v.Ub(7,"i",9),v.Bc(8,"pending_actions"),v.Tb(),v.Tb(),v.Ub(9,"h4",10),v.Bc(10,"En espera de aprobaci\xf3n"),v.Tb(),v.Tb(),v.Ub(11,"div",11),v.Ub(12,"h5",12),v.Bc(13,"Validaci\xf3n de Enrolamiento"),v.Tb(),v.Ub(14,"p",13),v.Bc(15,"Su proceso de enrolamiento est\xe1 en curso. Una vez que tengamos la aprobaci\xf3n usted podr\xe1 realizar esta actividad"),v.Tb(),v.Ub(16,"a",14),v.Bc(17,"Le notificaremos en breves momentos al correo registrado en el portal"),v.Tb(),v.Tb(),v.Tb(),v.Tb(),v.Tb(),v.Tb(),v.Tb())}function Me(e,a){1&e&&(v.Ub(0,"div"),v.Ub(1,"div",15),v.ec(),v.Ub(2,"svg",16),v.Pb(3,"circle",17),v.Tb(),v.Tb(),v.dc(),v.Ub(4,"h4"),v.Bc(5,"Cargando informaci\xf3n. espere un momento por favor."),v.Tb(),v.Tb())}function ze(e,a){1&e&&(v.Ub(0,"div",6),v.Ub(1,"div",11),v.Ub(2,"div",4),v.Ub(3,"div",20),v.Ub(4,"h3"),v.Bc(5,"No hay casos disponibles para gestionar retiros."),v.Tb(),v.Tb(),v.Tb(),v.Tb(),v.Tb())}function Le(e,a){1&e&&(v.Ub(0,"th",34),v.Bc(1,"N\xba Caso"),v.Tb())}var Ne=function(e){return[e]};function qe(e,a){if(1&e&&(v.Ub(0,"td",35),v.Ub(1,"a",36),v.Bc(2),v.Tb(),v.Tb()),2&e){var i=a.$implicit;v.Db(1),v.lc("routerLink",v.pc(2,Ne,i._attributes.key)),v.Db(1),v.Dc(" ",i.NumerodeCaso," ")}}function _e(e,a){1&e&&(v.Ub(0,"th",34),v.Bc(1," Fecha Ingreso "),v.Tb())}function $e(e,a){if(1&e&&(v.Ub(0,"td",35),v.Bc(1),v.gc(2,"date"),v.Tb()),2&e){var i=a.$implicit;v.Db(1),v.Dc(" ",v.ic(2,1,i.FechaHoraIngreso,"dd-MM-yyyy")," ")}}function Ve(e,a){1&e&&(v.Ub(0,"th",34),v.Bc(1," Cantidad "),v.Tb())}function Xe(e,a){if(1&e&&(v.Ub(0,"td",35),v.Bc(1),v.Tb()),2&e){var i=a.$implicit,t=v.fc(4);v.Db(1),v.Dc(" ",t.getTotalPallets(i),"")}}function Qe(e,a){1&e&&(v.Ub(0,"th",34),v.Bc(1," Observaciones "),v.Tb())}function We(e,a){if(1&e&&(v.Ub(0,"td",35),v.Bc(1),v.Tb()),2&e){var i=a.$implicit;v.Db(1),v.Dc(" ",i.ReservadePosiciones.ReservadePosiciones.ObservacionesAdicionales," ")}}function Ze(e,a){1&e&&(v.Ub(0,"th",37),v.Bc(1," Seleccionar "),v.Tb())}function Je(e,a){if(1&e&&(v.Ub(0,"td",38),v.Ub(1,"a",39),v.Ub(2,"mat-icon",40),v.Bc(3,"open_in_new"),v.Tb(),v.Tb(),v.Tb()),2&e){var i=a.$implicit;v.Db(1),v.lc("routerLink",v.pc(1,Ne,i.NumerodeCaso))}}function Ye(e,a){1&e&&v.Pb(0,"tr",41)}function Ge(e,a){1&e&&v.Pb(0,"tr",42)}var Ke=function(){return[5,10,20]};function ea(e,a){if(1&e&&(v.Ub(0,"div",4),v.Ub(1,"div",20),v.Ub(2,"table",21),v.Sb(3,22),v.Ac(4,Le,2,0,"th",23),v.Ac(5,qe,3,4,"td",24),v.Rb(),v.Sb(6,25),v.Ac(7,_e,2,0,"th",23),v.Ac(8,$e,3,4,"td",24),v.Rb(),v.Sb(9,26),v.Ac(10,Ve,2,0,"th",23),v.Ac(11,Xe,2,1,"td",24),v.Rb(),v.Sb(12,27),v.Ac(13,Qe,2,0,"th",23),v.Ac(14,We,2,1,"td",24),v.Rb(),v.Sb(15,28),v.Ac(16,Ze,2,0,"th",29),v.Ac(17,Je,4,3,"td",30),v.Rb(),v.Ac(18,Ye,1,0,"tr",31),v.Ac(19,Ge,1,0,"tr",32),v.Tb(),v.Pb(20,"mat-paginator",33),v.Tb(),v.Tb()),2&e){var i=v.fc(3);v.Db(2),v.lc("dataSource",i.datasourceCasosDisponibles),v.Db(16),v.lc("matHeaderRowDef",i.displayedColumnsCasos),v.Db(1),v.lc("matRowDefColumns",i.displayedColumnsCasos),v.Db(1),v.lc("pageSizeOptions",v.oc(4,Ke))}}function aa(e,a){if(1&e&&(v.Ub(0,"div"),v.Ub(1,"h2"),v.Bc(2," Listado de casos para gesti\xf3n de "),v.Ub(3,"b"),v.Bc(4,"Retiro"),v.Tb(),v.Tb(),v.Ac(5,ze,6,0,"div",18),v.Ac(6,ea,21,5,"div",19),v.Tb()),2&e){var i=v.fc(2);v.Db(5),v.lc("ngIf",0==i.listadoCasosDisponibleRetiro.length),v.Db(1),v.lc("ngIf",i.listadoCasosDisponibleRetiro.length>0)}}function ia(e,a){if(1&e&&(v.Ub(0,"div"),v.Ac(1,aa,7,2,"div",3),v.Pb(2,"router-outlet"),v.Tb()),2&e){var i=v.fc();v.Db(1),v.lc("ngIf",!i.visualizarDetalle)}}var ta=function(){function e(e,a,i,t,o,n){this.authService=e,this.storageService=a,this.store=i,this.datepipe=t,this.router=o,this.activatedRoute=n,this.subs=new f.a,this.habilitado=!1,this.listadoHoras=[],this.listadoCasosDisponibleRetiro=[],this.visualizarDetalle=!1,this.displayedColumnsCasos=["caso","FechaHoraIngreso","cantidad_inicial","observaciones","acciones"],this.datasourceCasosDisponibles=new H.o,this.visualizarDetalle=!1,this.router.routeReuseStrategy.shouldReuseRoute=function(){return!1}}return e.prototype.ngAfterViewInit=function(){this.datasourceCasosDisponibles.data=this.listadoCasosDisponibleRetiro,this.datasourceCasosDisponibles.paginator=this.paginator,null!=this.activatedRoute.firstChild&&(this.visualizarDetalle=!0)},e.prototype.ngOnInit=function(){this.store.dispatch(Object(I.a)()),this.loadData(),this.addListener()},e.prototype.loadData=function(){this.authService.getEmpresaStorage()},e.prototype.addListener=function(){var e=this;this.loading$=this.store.select("ui").pipe(Object(n.a)(function(e){return e.isLoading})),this.subs.sink=this.store.select("user").subscribe(function(a){a&&a.user&&(e.habilitado=!!a.user.habilitado,e.store.dispatch(Object(I.b)()))}),null==this.idEntityEmpresa&&(this.store.dispatch(Object(I.a)()),this.subs.sink=this.store.select("empresa").subscribe(function(a){var i=a.empresa;i&&(e.store.dispatch(Object(I.b)()),null==e.idEntityEmpresa&&(e.idEntityEmpresa=i.id,console.log("obtiene listado de casos "),e.storageService.getCasosDisponibleParaRetiro(e.idEntityEmpresa,"True")))})),this.subs.sink=this.store.select("tramohoras").pipe(Object(n.a)(function(e){var a=[];return e.loaded&&null==e.error&&e.bizagiResponse.Entities.TramodeHoras.forEach(function(e){a.push({CodigoTramo:e.CodigoTramo,Tramo:e.Tramo,id:e._attributes.key,seleccionado:!1,activo:!0})}),a})).subscribe(function(a){a&&(e.listadoHoras=Fe(a))}),this.subs.sink=this.store.select("registroSolicitud").subscribe(function(a){a.loading?e.store.dispatch(Object(I.a)()):a.loaded?(e.store.dispatch(Object(I.b)()),null!=a.bizagiResponse.Entities.ControlDeAlmacenaje&&e.poblarListadoCasos(a.bizagiResponse.Entities.ControlDeAlmacenaje)):a.error&&e.store.dispatch(Object(I.b)())})},e.prototype.poblarListadoCasos=function(e){var a=[];Array.isArray(e)?a=e:a.push(e),this.listadoCasosDisponibleRetiro=a,this.datasourceCasosDisponibles.data=Fe(this.listadoCasosDisponibleRetiro)},e.prototype.getTotalPallets=function(e){if(Array.isArray(e.ReservadePosiciones.ReservadePosiciones)){var a=0;return e.ReservadePosiciones.ReservadePosiciones.forEach(function(e){a+=Number.parseInt(e.CantidadRequerida)}),a}return e.ReservadePosiciones.ReservadePosiciones.CantidadRequerida},e.prototype.ngOnDestroy=function(){console.log("ngOnDestroy RetiroComponent"),this.subs.unsubscribe()},e.\u0275fac=function(a){return new(a||e)(v.Ob(r.a),v.Ob(C),v.Ob(T.h),v.Ob(t.f),v.Ob(L.d),v.Ob(L.a))},e.\u0275cmp=v.Ib({type:e,selectors:[["app-retiro"]],viewQuery:function(e,a){if(1&e&&(v.Ec(w.a,1),v.Ec(O.a,1)),2&e){var i=void 0;v.rc(i=v.cc())&&(a.paginator=i.first),v.rc(i=v.cc())&&(a.sort=i.first)}},decls:7,vars:7,consts:[["class","main-content",4,"ngIf"],[1,"main-content"],[1,"container-fluid"],[4,"ngIf"],[1,"row"],[1,"col-md-8"],[1,"card"],[1,"card-header","card-header-icon","card-header-danger"],[1,"card-icon"],[1,"material-icons"],[1,"card-title"],[1,"card-body"],[1,"card-subtitle","mb-2","text-muted"],[1,"card-text"],["href","#",1,"card-link"],[1,"loader"],["viewBox","25 25 50 50",1,"circular"],["cx","50","cy","50","r","20","fill","none","stroke-width","2","stroke-miterlimit","10",1,"path"],["class","card",4,"ngIf"],["class","row",4,"ngIf"],[1,"col","col-sm-12"],["mat-table","",1,"mat-elevation-z2","tabla-ppp",3,"dataSource"],["matColumnDef","caso"],["mat-header-cell","","mat-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","FechaHoraIngreso"],["matColumnDef","cantidad_inicial"],["matColumnDef","observaciones"],["matColumnDef","acciones"],["mat-header-cell","","mat-header","","style","text-align: center;",4,"matHeaderCellDef"],["mat-cell","","style","text-align: center;",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSizeOptions"],["mat-header-cell","","mat-header",""],["mat-cell",""],[3,"routerLink"],["mat-header-cell","","mat-header","",2,"text-align","center"],["mat-cell","",2,"text-align","center"],["mat-icon-button","",3,"routerLink"],[2,"color","rgb(209, 118, 6)"],["mat-header-row",""],["mat-row",""]],template:function(e,a){1&e&&(v.Ac(0,Ie,18,0,"div",0),v.Ub(1,"div",1),v.Ub(2,"div",2),v.Ac(3,Me,6,0,"div",3),v.gc(4,"async"),v.Ac(5,ia,3,1,"div",3),v.gc(6,"async"),v.Tb(),v.Tb()),2&e&&(v.lc("ngIf",!a.habilitado),v.Db(3),v.lc("ngIf",v.hc(4,3,a.loading$)),v.Db(2),v.lc("ngIf",a.habilitado&&0==v.hc(6,5,a.loading$)))},directives:[t.m,L.h,H.n,H.c,H.i,H.b,H.k,H.m,w.a,H.h,H.a,L.f,E.a,_.a,H.j,H.l],pipes:[t.b,t.f],styles:[".tabla-ppp[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#3a3939!important;font-weight:700}"]}),e}(),oa=i("ZAI4"),na=function(){return(na=Object.assign||function(e){for(var a,i=1,t=arguments.length;i<t;i++)for(var o in a=arguments[i])Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o]);return e}).apply(this,arguments)},sa=function(){for(var e=0,a=0,i=arguments.length;a<i;a++)e+=arguments[a].length;var t=Array(e),o=0;for(a=0;a<i;a++)for(var n=arguments[a],s=0,r=n.length;s<r;s++,o++)t[o]=n[s];return t};function ra(e,a){1&e&&(v.Ub(0,"th",34),v.Bc(1,"Bodega"),v.Tb())}function ca(e,a){if(1&e&&(v.Ub(0,"td",35),v.Bc(1),v.Tb()),2&e){var i=a.$implicit;v.Db(1),v.Dc(" ",i.Bodega," ")}}function da(e,a){1&e&&(v.Ub(0,"th",34),v.Bc(1,"C\xf3digo Pallet"),v.Tb())}function la(e,a){if(1&e&&(v.Ub(0,"td",35),v.Bc(1),v.Tb()),2&e){var i=a.$implicit;v.Db(1),v.Dc(" ",i.CodPallet," ")}}function ba(e,a){1&e&&(v.Ub(0,"th",34),v.Bc(1," C\xf3digo ubicaci\xf3n f\xedsica "),v.Tb())}function ua(e,a){if(1&e&&(v.Ub(0,"td",35),v.Bc(1),v.Tb()),2&e){var i=a.$implicit;v.Db(1),v.Dc("",i.CodigoUbicacionFisica," ")}}function pa(e,a){1&e&&(v.Ub(0,"th",36),v.Bc(1," Estandar de la ubicaci\xf3n "),v.Tb())}function ma(e,a){if(1&e&&(v.Ub(0,"td",37),v.Bc(1),v.Tb()),2&e){var i=a.$implicit;v.Db(1),v.Dc("",i.DescEstandar," ")}}function ha(e,a){1&e&&(v.Ub(0,"th",36),v.Bc(1," Estado de la ubicaci\xf3n "),v.Tb())}function fa(e,a){if(1&e&&(v.Ub(0,"td",37),v.Bc(1),v.Tb()),2&e){var i=a.$implicit;v.Db(1),v.Dc(" ",i.DescEstadoUbicacion," ")}}function va(e,a){1&e&&(v.Ub(0,"th",36),v.Bc(1," Selecci\xf3n "),v.Tb())}function Ta(e,a){if(1&e){var i=v.Vb();v.Ub(0,"td",37),v.Ub(1,"mat-checkbox",38),v.bc("change",function(e){v.uc(i);var t=a.$implicit;return v.fc().changeCheckboxPallet(t,e.checked)}),v.Tb(),v.Tb()}if(2&e){var t=a.$implicit;v.Db(1),v.lc("disabled","003"==t.CodEstadoUbicacion)("checked","003"==t.CodEstadoUbicacion)}}function Ca(e,a){1&e&&v.Pb(0,"tr",39)}function ga(e,a){1&e&&v.Pb(0,"tr",40)}function Da(e,a){1&e&&(v.Ub(0,"th",34),v.Bc(1," Horas disponibles "),v.Tb())}function Ua(e,a){if(1&e&&(v.Ub(0,"td",35),v.Bc(1),v.Tb()),2&e){var i=a.$implicit;v.Db(1),v.Dc(" ",i.Tramo," ")}}function ya(e,a){1&e&&(v.Ub(0,"th",34),v.Bc(1," Fecha de Retiro "),v.Tb())}function Ra(e,a){if(1&e&&(v.Ub(0,"td",35),v.Bc(1),v.gc(2,"date"),v.Tb()),2&e){var i=v.fc(2);v.Db(1),v.Dc(" ",v.ic(2,1,i.diaDespachoSeleccionado,"dd-MM-yyyy")," ")}}function Pa(e,a){1&e&&(v.Ub(0,"th",36),v.Bc(1," Reservar "),v.Tb())}function Ea(e,a){if(1&e){var i=v.Vb();v.Ub(0,"td",37),v.Ub(1,"mat-checkbox",38),v.bc("change",function(e){v.uc(i);var t=a.$implicit;return v.fc(2).changeChecbox(t,e.checked)}),v.Tb(),v.Tb()}if(2&e){var t=a.$implicit;v.Db(1),v.lc("disabled",!t.activo||!1)("checked",t.seleccionado||!1)}}function Aa(e,a){1&e&&v.Pb(0,"tr",39)}function Ba(e,a){1&e&&v.Pb(0,"tr",40)}function Sa(e,a){if(1&e&&(v.Ub(0,"div",0),v.Ub(1,"div",41),v.Ub(2,"div",42),v.Ub(3,"i",43),v.Bc(4,"notifications"),v.Tb(),v.Pb(5,"span",44),v.Ub(6,"span",45),v.Bc(7),v.Tb(),v.Tb(),v.Tb(),v.Ub(8,"div",1),v.Ub(9,"table",46),v.Sb(10,47),v.Ac(11,Da,2,0,"th",6),v.Ac(12,Ua,2,1,"td",7),v.Rb(),v.Sb(13,48),v.Ac(14,ya,2,0,"th",6),v.Ac(15,Ra,3,4,"td",7),v.Rb(),v.Sb(16,49),v.Ac(17,Pa,2,0,"th",50),v.Ac(18,Ea,2,2,"td",12),v.Rb(),v.Ac(19,Aa,1,0,"tr",15),v.Ac(20,Ba,1,0,"tr",16),v.Tb(),v.Tb(),v.Tb()),2&e){var i=v.fc();v.Db(7),v.Dc("De acuerdo a la cantidad de pallets seleccionados para retiro, debe indicar ",i.cantidadTramos," rango(s) de horario "),v.Db(2),v.lc("dataSource",i.datasourceTramosHoras),v.Db(10),v.lc("matHeaderRowDef",i.displayedColumnsTramoHoras),v.Db(1),v.lc("matRowDefColumns",i.displayedColumnsTramoHoras)}}var ka=function(){return[5,10,20]},wa=[{path:"",children:[{path:"registro",component:je},{path:"retiro",component:ta,children:[{path:":numCaso",component:function(){function e(e,a,i,t,o){this.router=e,this.activatedRoute=a,this.store=i,this.storageService=t,this.datepipe=o,this.subs=new f.a,this.datasourcePallets=new H.o,this.numeroCaso="",this.minDateReserva=new Date,this.listadoPallets=[],this.cantidadPalletsSeleccionados=0,this.datasourceTramosHoras=new H.o,this.listadoHoras=[],this.listadoParametros=[],this.displayedColumnsTramoHoras=["horaDisponible","fechaIngreso","reservar"],this.displayedColumns=["bodega","pallet","fisica","estandar","estado","seleccion"],this.cantidadTramos=0}return e.prototype.ngOnDestroy=function(){this.subs.unsubscribe()},e.prototype.ngAfterViewInit=function(){this.datasourcePallets.paginator=this.paginator,this.datasourceTramosHoras.data=this.listadoHoras},e.prototype.ngOnInit=function(){this.minDateReserva.setDate(this.minDateReserva.getDate()+1);var e=this.collectRouteParams(this.router);this.numeroCaso=e.numCaso,this.store.dispatch(Object(h.v)()),this.store.dispatch(Object(h.p)()),this.addListener()},e.prototype.addListener=function(){var e=this;this.subs.sink=this.store.select("parametros").subscribe(function(a){if(a.loaded){var i=a.bizagiResponse.Entities.ParametrosSistema;null!=i&&i.length>0&&(e.listadoParametros=sa(i))}}),this.subs.sink=this.store.select("registroSolicitud").pipe(Object(n.a)(function(a){if(a.loaded&&null!=a.bizagiResponse.Entities.ControlDeAlmacenaje){var i=[];return Array.isArray(a.bizagiResponse.Entities.ControlDeAlmacenaje)?i=a.bizagiResponse.Entities.ControlDeAlmacenaje:i.push(a.bizagiResponse.Entities.ControlDeAlmacenaje),i.filter(function(a){return a.NumerodeCaso==e.numeroCaso})[0]}})).subscribe(function(a){null!=a&&(e.listadoPallets=sa(a.DetalledeUbicacionesDis.DetalledeUbicacionesDisp),e.datasourcePallets.data=e.listadoPallets,e.fechaIngreso=a.FechaHoraIngreso,e.store.dispatch(Object(h.C)({filtro:"NumerodeCaso='"+e.numeroCaso+"'"})))}),this.subs.sink=this.store.select("ubicacionesCaso").subscribe(function(a){a.loading||a.loaded&&""!=a.bizagiResponse.Entities&&e.poblarUbicaciones(a.bizagiResponse.Entities.NewUbicaciones)}),this.subs.sink=this.store.select("tramohoras").pipe(Object(n.a)(function(e){var a=[];return e.loaded&&null==e.error&&e.bizagiResponse.Entities.TramodeHoras.forEach(function(e){a.push({CodigoTramo:e.CodigoTramo,Tramo:e.Tramo,id:e._attributes.key,seleccionado:!1,activo:!0})}),a})).subscribe(function(a){a&&(e.listadoHoras=sa(a),e.datasourceTramosHoras.data=sa(e.listadoHoras))})},e.prototype.changeChecbox=function(e,a){e.seleccionado=a,this.datasourceTramosHoras.data.filter(function(e){return 1==e.seleccionado}).length==this.cantidadTramos?this.desactivarTramosHorarioSinSeleccion():this.activarTramosHorarios()},e.prototype.changeCheckboxPallet=function(e,a){e.seleccionado=a,this.cantidadPalletsSeleccionados=this.datasourcePallets.data.filter(function(e){return 1==e.seleccionado}).length,this.calcularCantidadTramos();var i=this.datasourceTramosHoras.data.filter(function(e){return 1==e.seleccionado}).length;if(i==this.cantidadTramos)this.desactivarTramosHorarioSinSeleccion();else if(i>this.cantidadTramos){var t=this.datasourceTramosHoras.data.filter(function(e){return 1==e.seleccionado});t[t.length-1].seleccionado=!1,this.desactivarTramosHorarioSinSeleccion()}else this.activarTramosHorarios()},e.prototype.activarTramosHorarios=function(){this.datasourceTramosHoras.data.forEach(function(e){return e.activo=!0})},e.prototype.desactivarTramosHorarioSinSeleccion=function(){this.datasourceTramosHoras.data.filter(function(e){return 0==e.seleccionado}).forEach(function(e){return e.activo=!1})},e.prototype.calcularCantidadTramos=function(){var e=this.listadoParametros.find(function(e){return e.CodParametro==m.a.id_cantidadMaximaRetiro}),a=30;null==e&&null==e||(a=e.Valor),this.cantidadTramos=a>1?this.cantidadPalletsSeleccionados%a==0?this.cantidadPalletsSeleccionados/a:Math.ceil(this.cantidadPalletsSeleccionados/a):this.cantidadPalletsSeleccionados},e.prototype.poblarUbicaciones=function(e){var a=[];Array.isArray(e)?a=e:a.push(e);var i=[];this.listadoPallets.map(function(e){var t=a.find(function(a){return a._attributes.key===e.CodUbicacionNew}),o=na({},e);o.DescEstandar=t.EstandardelaUbicacion.DescEstandar,o.Bodega=t.Bodega.DescBodega,o.CodigoUbicacionFisica=t.CodigoUbicacionFisica,o.CodEstadoUbicacion=t.EstadodelaUbicacion.CodEstado,o.DescEstadoUbicacion=t.EstadodelaUbicacion.DescripcionEstado,o.seleccionado="003"==t.EstadodelaUbicacion.CodEstado,i.push(o)}),this.datasourcePallets.data=sa(i)},e.prototype.volverMenuInicio=function(){this.router.navigate(["../"],{relativeTo:this.activatedRoute})},e.prototype.collectRouteParams=function(e){for(var a={},i=[e.routerState.snapshot.root];i.length>0;){var t=i.pop();a=na(na({},a),t.params),i.push.apply(i,t.children)}return a},e.prototype.addEvent=function(e,a){this.diaRetiroSeleccionado=a.value},e.prototype.confirmarRetiro=function(){var e=this;if(0!=this.cantidadPalletsSeleccionados)if(null!=this.diaRetiroSeleccionado)if(0!=this.datasourceTramosHoras.data.filter(function(e){return 1==e.seleccionado}).length){var a=this.datasourcePallets.data.filter(function(e){return 1==e.seleccionado&&"002"==e.CodEstadoUbicacion});j.a.fire({title:"\xbfDesea cursar la solicitud para procesar el retiro?",icon:"question",allowOutsideClick:!1,showCancelButton:!0,showConfirmButton:!0}).then(function(i){i.isConfirmed&&e.procesarRetiroPAllets(a)})}else F("Debe indicar el tramo de horario para el Retiro");else F("Debe indicar la fecha y hora del Retiro");else F("Debe indicar el o los Pallets que desea retirar.")},e.prototype.procesarRetiroPAllets=function(e){var a=this;j.a.fire({title:"Procesando informaci\xf3n de Retiro",text:"Actualizando la informaci\xf3n en nuestros sistemas, espere por favor.",icon:"info",allowOutsideClick:!1}),j.a.showLoading();try{j.a.close(),this.storageService.procesarRetiro(e,this.datepipe.transform(this.diaRetiroSeleccionado,"yyyy-MM-dd"),this.numeroCaso,this.datasourceTramosHoras.data.filter(function(e){return 1==e.seleccionado})).subscribe(function(e){0==e?j.a.fire({title:"Error",icon:"error",allowOutsideClick:!1,text:"Ha ocurrido un error al procesar la solicitud."}):(console.log(e),a.router.navigate(["../"],{relativeTo:a.activatedRoute}))})}catch(i){j.a.close(),j.a.fire({title:"Error",icon:"error",allowOutsideClick:!1,text:"Ha ocurrido un error al procesar la solicitud."})}},e.\u0275fac=function(a){return new(a||e)(v.Ob(L.d),v.Ob(L.a),v.Ob(T.h),v.Ob(C),v.Ob(t.f))},e.\u0275cmp=v.Ib({type:e,selectors:[["app-detalle"]],viewQuery:function(e,a){var i;1&e&&v.Ec(w.a,1),2&e&&v.rc(i=v.cc())&&(a.paginator=i.first)},decls:72,vars:14,consts:[[1,"row"],[1,"col","col-sm-12"],["type","button","color","accent",1,"btn","btn-sm","btn-sm","pull-right",2,"margin-top","-25px",3,"click"],["expanded",""],["mat-table","",1,"mat-elevation-z2","tabla-ppp",3,"dataSource"],["matColumnDef","bodega"],["mat-header-cell","","mat-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","pallet"],["matColumnDef","fisica"],["matColumnDef","estandar"],["mat-header-cell","","mat-header","","style","text-align: center;",4,"matHeaderCellDef"],["mat-cell","","style","text-align: center;",4,"matCellDef"],["matColumnDef","estado"],["matColumnDef","seleccion"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSizeOptions"],[1,"card"],[1,"card-header","card-header-icon","card-header-info"],[1,"card-icon"],[1,"material-icons"],[1,"card-title"],[1,"card-body"],[1,"col-md-6"],[1,"width-70"],["matInput","","readonly","",3,"value"],["matInput","","readonly","","required","",3,"matDatepicker","min","dateChange"],["matSuffix","",3,"for"],["color","primary","disabled","false"],["pFechaRetiro",""],["class","row",4,"ngIf"],[1,"col","col-lg-12","col-sm-12","col-md-12"],["mat-flat-button","","color","primary",1,"pull-right",3,"click"],["mat-header-cell","","mat-header",""],["mat-cell",""],["mat-header-cell","","mat-header","",2,"text-align","center"],["mat-cell","",2,"text-align","center"],[3,"disabled","checked","change"],["mat-header-row",""],["mat-row",""],[1,"col-md-12"],["data-notify","container",1,"alert","alert-info","alert-with-icon"],["data-notify","icon",1,"material-icons"],["data-notify","icon",1,"now-ui-icons","ui-1_bell-53"],["data-notify","message"],["mat-table","","matSort","",1,"mat-elevation-z2","tabla-ppp",3,"dataSource"],["matColumnDef","horaDisponible"],["matColumnDef","fechaIngreso"],["matColumnDef","reservar"],["mat-header-cell","","style","text-align: center;","mat-header","",4,"matHeaderCellDef"]],template:function(e,a){if(1&e&&(v.Ub(0,"h3"),v.Bc(1),v.Tb(),v.Ub(2,"div",0),v.Ub(3,"div",1),v.Ub(4,"button",2),v.bc("click",function(){return a.volverMenuInicio()}),v.Bc(5," Volver"),v.Tb(),v.Tb(),v.Tb(),v.Ub(6,"div",0),v.Ub(7,"div",1),v.Ub(8,"mat-expansion-panel",3),v.Ub(9,"mat-expansion-panel-header"),v.Ub(10,"mat-panel-title"),v.Bc(11," Listado de Pallets "),v.Tb(),v.Ub(12,"mat-panel-description"),v.Bc(13," Selecci\xf3n para retiro "),v.Ub(14,"mat-icon"),v.Bc(15,"list"),v.Tb(),v.Tb(),v.Tb(),v.Ub(16,"table",4),v.Sb(17,5),v.Ac(18,ra,2,0,"th",6),v.Ac(19,ca,2,1,"td",7),v.Rb(),v.Sb(20,8),v.Ac(21,da,2,0,"th",6),v.Ac(22,la,2,1,"td",7),v.Rb(),v.Sb(23,9),v.Ac(24,ba,2,0,"th",6),v.Ac(25,ua,2,1,"td",7),v.Rb(),v.Sb(26,10),v.Ac(27,pa,2,0,"th",11),v.Ac(28,ma,2,1,"td",12),v.Rb(),v.Sb(29,13),v.Ac(30,ha,2,0,"th",11),v.Ac(31,fa,2,1,"td",12),v.Rb(),v.Sb(32,14),v.Ac(33,va,2,0,"th",11),v.Ac(34,Ta,2,2,"td",12),v.Rb(),v.Ac(35,Ca,1,0,"tr",15),v.Ac(36,ga,1,0,"tr",16),v.Tb(),v.Pb(37,"mat-paginator",17),v.Tb(),v.Tb(),v.Tb(),v.Ub(38,"div",0),v.Ub(39,"div",1),v.Ub(40,"div",18),v.Ub(41,"div",19),v.Ub(42,"div",20),v.Ub(43,"i",21),v.Bc(44,"pending_actions"),v.Tb(),v.Tb(),v.Ub(45,"h4",22),v.Bc(46,"Configurar Condiciones"),v.Tb(),v.Tb(),v.Ub(47,"div",23),v.Ub(48,"div",0),v.Ub(49,"div",24),v.Ub(50,"mat-form-field",25),v.Ub(51,"mat-label"),v.Bc(52,"Fecha Ingreso"),v.Tb(),v.Pb(53,"input",26),v.gc(54,"date"),v.Tb(),v.Tb(),v.Tb(),v.Ub(55,"div",0),v.Ub(56,"div",24),v.Ub(57,"mat-form-field",25),v.Ub(58,"mat-label"),v.Bc(59,"Fecha Retiro"),v.Tb(),v.Ub(60,"input",27),v.bc("dateChange",function(e){return a.addEvent("change",e)}),v.Tb(),v.Pb(61,"mat-datepicker-toggle",28),v.Pb(62,"mat-datepicker",29,30),v.Tb(),v.Tb(),v.Tb(),v.Ub(64,"div",0),v.Ub(65,"div",1),v.Ac(66,Sa,21,4,"div",31),v.Tb(),v.Tb(),v.Tb(),v.Tb(),v.Tb(),v.Tb(),v.Pb(67,"br"),v.Ub(68,"div",0),v.Ub(69,"div",32),v.Ub(70,"button",33),v.bc("click",function(){return a.confirmarRetiro()}),v.Bc(71,"Confirmar Retiro"),v.Tb(),v.Tb(),v.Tb()),2&e){var i=v.sc(63);v.Db(1),v.Dc("Listado de Pallets para el Caso ",a.numeroCaso,""),v.Db(15),v.lc("dataSource",a.datasourcePallets),v.Db(19),v.lc("matHeaderRowDef",a.displayedColumns),v.Db(1),v.lc("matRowDefColumns",a.displayedColumns),v.Db(1),v.lc("pageSizeOptions",v.oc(13,ka)),v.Db(16),v.mc("value",v.ic(54,10,a.fechaIngreso,"dd-MM-yyyy")),v.Db(7),v.lc("matDatepicker",i)("min",a.minDateReserva),v.Db(1),v.lc("for",i),v.Db(5),v.lc("ngIf",null!=a.diaRetiroSeleccionado&&a.cantidadPalletsSeleccionados>0)}},directives:[N.b,N.d,N.e,N.c,_.a,H.n,H.c,H.i,H.b,H.k,H.m,w.a,U.c,U.f,P.b,X.b,X.d,U.g,X.a,t.m,E.b,H.h,H.a,W.a,H.j,H.l,O.a],pipes:[t.f],styles:[".mat-expansion-panel-header-description[_ngcontent-%COMP%], .mat-expansion-panel-header-title[_ngcontent-%COMP%]{flex-basis:0}.mat-expansion-panel-header-description[_ngcontent-%COMP%]{justify-content:space-between;align-items:center}"]}),e}()}]}]}],Oa=function(){function e(){}return e.\u0275mod=v.Mb({type:e}),e.\u0275inj=v.Lb({factory:function(a){return new(a||e)},providers:[C],imports:[[t.c,L.g.forChild(wa),oa.b]]}),e}()},xDdU:function(e,a,i){var t,o,n=i("4fRq"),s=i("I2ZF"),r=0,c=0;e.exports=function(e,a,i){var d=a&&i||0,l=a||[],b=(e=e||{}).node||t,u=void 0!==e.clockseq?e.clockseq:o;if(null==b||null==u){var p=n();null==b&&(b=t=[1|p[0],p[1],p[2],p[3],p[4],p[5]]),null==u&&(u=o=16383&(p[6]<<8|p[7]))}var m=void 0!==e.msecs?e.msecs:(new Date).getTime(),h=void 0!==e.nsecs?e.nsecs:c+1,f=m-r+(h-c)/1e4;if(f<0&&void 0===e.clockseq&&(u=u+1&16383),(f<0||m>r)&&void 0===e.nsecs&&(h=0),h>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");r=m,c=h,o=u;var v=(1e4*(268435455&(m+=122192928e5))+h)%4294967296;l[d++]=v>>>24&255,l[d++]=v>>>16&255,l[d++]=v>>>8&255,l[d++]=255&v;var T=m/4294967296*1e4&268435455;l[d++]=T>>>8&255,l[d++]=255&T,l[d++]=T>>>24&15|16,l[d++]=T>>>16&255,l[d++]=u>>>8|128,l[d++]=255&u;for(var C=0;C<6;++C)l[d+C]=b[C];return a||s(l)}}}]);